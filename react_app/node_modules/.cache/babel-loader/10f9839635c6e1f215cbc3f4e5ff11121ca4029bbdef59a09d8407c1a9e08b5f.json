{"ast":null,"code":"export async function Velocity() {\n  let accessToken = \"\";\n  const arrayOfMachines = [];\n  try {\n    const loginResponse = await window.ZOHO.CREATOR.init().then(function (data) {\n      let accessTokenz = \"\";\n      let userid = window.ZOHO.CREATOR.UTIL.getQueryParams().user;\n      //console.log(\"userid\"+userid)\n\n      var config = {\n        appName: \"infinite-control-room\",\n        reportName: \"My_Profile_Data\",\n        criteria: \"Username ==\\\"\" + userid + \"\\\"\",\n        page: \"1\",\n        pageSize: \"100\"\n      };\n      const access = window.ZOHO.CREATOR.API.getAllRecords(config).then(function (response) {\n        let userData = response;\n        accessTokenz = userData.data[0].Access_Token;\n        return accessTokenz;\n      });\n      return access;\n    });\n    const queryParams = await window.ZOHO.CREATOR.init().then(function (data) {\n      return window.ZOHO.CREATOR.UTIL.getQueryParams();\n    });\n    const loginData = await loginResponse;\n    // console.log(\"loginData\"+ loginData);\n    accessToken = loginData;\n    //accessToken=\"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyY0NxRnpxRXJrNU5GS1RjTi1YSk1IdE9NS2tWVTZXS1hIdHZFMF8xZE5ZIn0.eyJleHAiOjE2ODY5NTQ5OTEsImlhdCI6MTY4NjkxMTc5MSwianRpIjoiNDU0MGQ1MTctNjE1ZS00NDZmLTgxOTgtNTc1YzY1ZjUwZmM3IiwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS5pbmZpbml0ZS11cHRpbWUuY29tL3JlYWxtcy9pZGFwIiwic3ViIjoiZjo2MGNhNzY4Yy1iMTA0LTQ0OTktYjU4Yy05MzliOTdlNzAzM2Q6ODcxMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImlkYXAiLCJzZXNzaW9uX3N0YXRlIjoiNGQ0YjUzMDAtM2NlZC00ZTk5LTlmNDEtYmRjMDI0ZjJkMzhlIiwic2NvcGUiOiJlbWFpbCIsInNpZCI6IjRkNGI1MzAwLTNjZWQtNGU5OS05ZjQxLWJkYzAyNGYyZDM4ZSIsImlzX2FkbWluIjoiZmFsc2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlkYXBfcm9sZSI6IlJPTEVfVVNFUiIsImVtYWlsIjoiUmFwYWthLmNoYW5kcmFzaGVrYXJAZ21haWwuY29tIn0.l8NL7t1Kqf77hOHo_kGSpcKzDoSjFFYmKdyn3y6-fC45B_ICvvYz_FLMfazPMOxVzMG0nb0nD88y_J45wFYTjLnfwbZbIzw--vbVKt1EMe4qK6ko4wv1jTRrjg97m7PaQL3FLcv1JSPafJ8ukPm1z4BPo0tpoHlbZX1vCGwm1ZgdJqTBM6bJrtrLyB1EcABWsXIbd7r_756vua7sOO_7ZkAppAiHTV3qqjM5N0cjHaKTkMXYAiVkl6kBpsZf7N8CCdwkZTKV3rapK_zQGJhS2VxSNkeiERF2Y16nyPxSjxyzQFBB6I0AB2xqSSWlhJ6Shk2yaaI1MB9_cdt8oOgJPg\";\n    // console.log(\"queryParamsvelocity\" + JSON.stringify(queryParams));\n\n    //console.log(\"accessToken\"+accessToken);\n    //console.log(\"check\"+ accessToken);\n\n    // let orgid=queryParams.PlantId.split(\",\")[1];\n    const orgidAll = queryParams.PlantId.split(\",\");\n    let plantsData;\n    let plantsResponse;\n    plantsResponse = await Promise.all(orgidAll.map(async orgid => {\n      plantsResponse = await fetch(`https://api.infinite-uptime.com/api/2.0/md/monitoring/bymonitors?plantId=${orgid}`, {\n        method: 'GET',\n        headers: {\n          'accept': 'application/json',\n          'Authorization': 'Bearer ' + accessToken\n        }\n      });\n      plantsData = await plantsResponse.json();\n      plantsData.machineGroups.map(mg => {\n        mg.machines.map(machine => {\n          arrayOfMachines.push(machine);\n        });\n      });\n    }));\n\n    // console.log(\"velocityarrayofMachines\", arrayOfMachines);\n\n    return arrayOfMachines;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n}\n_c = Velocity;\nvar _c;\n$RefreshReg$(_c, \"Velocity\");","map":{"version":3,"names":["Velocity","accessToken","arrayOfMachines","loginResponse","window","ZOHO","CREATOR","init","then","data","accessTokenz","userid","UTIL","getQueryParams","user","config","appName","reportName","criteria","page","pageSize","access","API","getAllRecords","response","userData","Access_Token","queryParams","loginData","orgidAll","PlantId","split","plantsData","plantsResponse","Promise","all","map","orgid","fetch","method","headers","json","machineGroups","mg","machines","machine","push","error","console","_c","$RefreshReg$"],"sources":["C:/Users/demo/Desktop/CRV/Zoho_widget_React/react_app/src/Services/Velocity.js"],"sourcesContent":["\r\nexport async function Velocity() {\r\n    let accessToken = \"\";\r\n\r\n    const arrayOfMachines = [];\r\n\r\n\r\n\r\n    try {\r\n\r\n        const loginResponse = await window.ZOHO.CREATOR.init().then(function (data) {\r\n            let accessTokenz = \"\";\r\n            let userid=window.ZOHO.CREATOR.UTIL.getQueryParams().user;\r\n            //console.log(\"userid\"+userid)\r\n          \r\n           var config = {\r\n            appName: \"infinite-control-room\",\r\n            reportName: \"My_Profile_Data\",\r\n            criteria: \"Username ==\\\"\"+userid+\"\\\"\",\r\n            page: \"1\",\r\n            pageSize: \"100\"\r\n          }\r\n            const access = window.ZOHO.CREATOR.API.getAllRecords(config).then(function (response) {\r\n                let userData = response;\r\n\r\n                accessTokenz = userData.data[0].Access_Token;\r\n                return accessTokenz;\r\n            });\r\n            return access;\r\n        });\r\n        const queryParams = await window.ZOHO.CREATOR.init().then(function (data) {\r\n            return window.ZOHO.CREATOR.UTIL.getQueryParams();\r\n        });\r\n\r\n        const loginData = await loginResponse;\r\n        // console.log(\"loginData\"+ loginData);\r\n        accessToken = loginData;\r\n        //accessToken=\"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyY0NxRnpxRXJrNU5GS1RjTi1YSk1IdE9NS2tWVTZXS1hIdHZFMF8xZE5ZIn0.eyJleHAiOjE2ODY5NTQ5OTEsImlhdCI6MTY4NjkxMTc5MSwianRpIjoiNDU0MGQ1MTctNjE1ZS00NDZmLTgxOTgtNTc1YzY1ZjUwZmM3IiwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS5pbmZpbml0ZS11cHRpbWUuY29tL3JlYWxtcy9pZGFwIiwic3ViIjoiZjo2MGNhNzY4Yy1iMTA0LTQ0OTktYjU4Yy05MzliOTdlNzAzM2Q6ODcxMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImlkYXAiLCJzZXNzaW9uX3N0YXRlIjoiNGQ0YjUzMDAtM2NlZC00ZTk5LTlmNDEtYmRjMDI0ZjJkMzhlIiwic2NvcGUiOiJlbWFpbCIsInNpZCI6IjRkNGI1MzAwLTNjZWQtNGU5OS05ZjQxLWJkYzAyNGYyZDM4ZSIsImlzX2FkbWluIjoiZmFsc2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlkYXBfcm9sZSI6IlJPTEVfVVNFUiIsImVtYWlsIjoiUmFwYWthLmNoYW5kcmFzaGVrYXJAZ21haWwuY29tIn0.l8NL7t1Kqf77hOHo_kGSpcKzDoSjFFYmKdyn3y6-fC45B_ICvvYz_FLMfazPMOxVzMG0nb0nD88y_J45wFYTjLnfwbZbIzw--vbVKt1EMe4qK6ko4wv1jTRrjg97m7PaQL3FLcv1JSPafJ8ukPm1z4BPo0tpoHlbZX1vCGwm1ZgdJqTBM6bJrtrLyB1EcABWsXIbd7r_756vua7sOO_7ZkAppAiHTV3qqjM5N0cjHaKTkMXYAiVkl6kBpsZf7N8CCdwkZTKV3rapK_zQGJhS2VxSNkeiERF2Y16nyPxSjxyzQFBB6I0AB2xqSSWlhJ6Shk2yaaI1MB9_cdt8oOgJPg\";\r\n       // console.log(\"queryParamsvelocity\" + JSON.stringify(queryParams));\r\n\r\n        //console.log(\"accessToken\"+accessToken);\r\n        //console.log(\"check\"+ accessToken);\r\n\r\n        // let orgid=queryParams.PlantId.split(\",\")[1];\r\n        const orgidAll = queryParams.PlantId.split(\",\");\r\n        let plantsData;\r\n        let plantsResponse\r\n        plantsResponse = await Promise.all(orgidAll.map(async (orgid) => {\r\n            plantsResponse = await fetch(`https://api.infinite-uptime.com/api/2.0/md/monitoring/bymonitors?plantId=${orgid}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'accept': 'application/json',\r\n                    'Authorization': 'Bearer ' + accessToken,\r\n                },\r\n            });\r\n            plantsData = await plantsResponse.json();\r\n            \r\n            plantsData.machineGroups.map((mg) => {\r\n                \r\n                mg.machines.map((machine) => {\r\n                    arrayOfMachines.push(machine);\r\n                })\r\n\r\n            })\r\n\r\n        }));\r\n\r\n        // console.log(\"velocityarrayofMachines\", arrayOfMachines);\r\n\r\n        return arrayOfMachines;\r\n\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        throw error;\r\n    }\r\n}\r\n"],"mappings":"AACA,OAAO,eAAeA,QAAQA,CAAA,EAAG;EAC7B,IAAIC,WAAW,GAAG,EAAE;EAEpB,MAAMC,eAAe,GAAG,EAAE;EAI1B,IAAI;IAEA,MAAMC,aAAa,GAAG,MAAMC,MAAM,CAACC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,CAAC,CAACC,IAAI,CAAC,UAAUC,IAAI,EAAE;MACxE,IAAIC,YAAY,GAAG,EAAE;MACrB,IAAIC,MAAM,GAACP,MAAM,CAACC,IAAI,CAACC,OAAO,CAACM,IAAI,CAACC,cAAc,CAAC,CAAC,CAACC,IAAI;MACzD;;MAED,IAAIC,MAAM,GAAG;QACZC,OAAO,EAAE,uBAAuB;QAChCC,UAAU,EAAE,iBAAiB;QAC7BC,QAAQ,EAAE,eAAe,GAACP,MAAM,GAAC,IAAI;QACrCQ,IAAI,EAAE,GAAG;QACTC,QAAQ,EAAE;MACZ,CAAC;MACC,MAAMC,MAAM,GAAGjB,MAAM,CAACC,IAAI,CAACC,OAAO,CAACgB,GAAG,CAACC,aAAa,CAACR,MAAM,CAAC,CAACP,IAAI,CAAC,UAAUgB,QAAQ,EAAE;QAClF,IAAIC,QAAQ,GAAGD,QAAQ;QAEvBd,YAAY,GAAGe,QAAQ,CAAChB,IAAI,CAAC,CAAC,CAAC,CAACiB,YAAY;QAC5C,OAAOhB,YAAY;MACvB,CAAC,CAAC;MACF,OAAOW,MAAM;IACjB,CAAC,CAAC;IACF,MAAMM,WAAW,GAAG,MAAMvB,MAAM,CAACC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,CAAC,CAACC,IAAI,CAAC,UAAUC,IAAI,EAAE;MACtE,OAAOL,MAAM,CAACC,IAAI,CAACC,OAAO,CAACM,IAAI,CAACC,cAAc,CAAC,CAAC;IACpD,CAAC,CAAC;IAEF,MAAMe,SAAS,GAAG,MAAMzB,aAAa;IACrC;IACAF,WAAW,GAAG2B,SAAS;IACvB;IACD;;IAEC;IACA;;IAEA;IACA,MAAMC,QAAQ,GAAGF,WAAW,CAACG,OAAO,CAACC,KAAK,CAAC,GAAG,CAAC;IAC/C,IAAIC,UAAU;IACd,IAAIC,cAAc;IAClBA,cAAc,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACN,QAAQ,CAACO,GAAG,CAAC,MAAOC,KAAK,IAAK;MAC7DJ,cAAc,GAAG,MAAMK,KAAK,CAAE,4EAA2ED,KAAM,EAAC,EAAE;QAC9GE,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,QAAQ,EAAE,kBAAkB;UAC5B,eAAe,EAAE,SAAS,GAAGvC;QACjC;MACJ,CAAC,CAAC;MACF+B,UAAU,GAAG,MAAMC,cAAc,CAACQ,IAAI,CAAC,CAAC;MAExCT,UAAU,CAACU,aAAa,CAACN,GAAG,CAAEO,EAAE,IAAK;QAEjCA,EAAE,CAACC,QAAQ,CAACR,GAAG,CAAES,OAAO,IAAK;UACzB3C,eAAe,CAAC4C,IAAI,CAACD,OAAO,CAAC;QACjC,CAAC,CAAC;MAEN,CAAC,CAAC;IAEN,CAAC,CAAC,CAAC;;IAEH;;IAEA,OAAO3C,eAAe;EAG1B,CAAC,CAAC,OAAO6C,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,MAAMA,KAAK;EACf;AACJ;AAACE,EAAA,GA3EqBjD,QAAQ;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}