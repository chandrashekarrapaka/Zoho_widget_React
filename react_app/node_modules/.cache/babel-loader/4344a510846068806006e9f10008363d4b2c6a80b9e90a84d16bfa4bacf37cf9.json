{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"./AA.css\";import{LoginCredentialsAndQueries}from\"../../../Services/loginCredentialsAndQueries\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AA(prop){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),accessToken=_useState2[0],setAccessToken=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),dataDisplay=_useState4[0],setDataDisplay=_useState4[1];var currentPlant=prop.currentPlant;console.log(\"AA1\",currentPlant[0].plantid,accessToken);useEffect(function(){var fetchDataz=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return LoginCredentialsAndQueries();case 3:response=_context.sent;if(response.length>0){console.log(\"responseAA\",response);setAccessToken(response);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchDataz(){return _ref.apply(this,arguments);};}();fetchDataz();},[]);var plantid=currentPlant[0].plantid;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var now,dtTo,dtFrom,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:now=new Date();dtTo=now.toISOString().replace(/\\.\\d+Z$/,\"Z\").replace(/:/g,\"%3A\");dtFrom=new Date(now.getTime()-48*60*60*1000).toISOString().replace(/\\.\\d+Z$/,\"Z\").replace(/:/g,\"%3A\");_context2.prev=3;_context2.next=6;return fetch(\"https://api-idap.infinite-uptime.com/api/3.0/idap-api/anomaly-alerts?plantIds=\"+plantid+\"&from=\"+dtFrom+\"&to=\"+dtTo,{method:\"GET\",headers:{accept:\"application/json\",Authorization:\"Bearer \"+accessToken}});case 6:response=_context2.sent;_context2.next=9;return response.json();case 9:data=_context2.sent;setDataDisplay(data);console.log(\"alerts\",JSON.stringify(data));_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](3);console.error(_context2.t0);case 17:case\"end\":return _context2.stop();}},_callee2,null,[[3,14]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();var interval=setInterval(fetchData,30000);// Fetch data every 30 seconds\nreturn function(){clearInterval(interval);// Clean up the interval on component unmount\n};},[currentPlant,accessToken]);return/*#__PURE__*/_jsxs(\"div\",{className:\"content-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"head\",children:\"Anomaly Alert\"}),/*#__PURE__*/_jsx(\"div\",{className:\"content-container\",children:dataDisplay&&dataDisplay.data?dataDisplay.data.map(function(ele){return/*#__PURE__*/_jsxs(\"div\",{className:\"content-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"machine-name\",children:[\"Machine Name: \",ele.machineName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"monitor-name\",children:[\"Monitor Name: \",ele.monitorName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"anomaly-magnitude\",children:[\"Anomaly Magnitude: \",ele.anomalyMagnitude]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-timestamp\",children:[\"Alert Timestamp: \",ele.alertTimestamp]}),/*#__PURE__*/_jsxs(\"div\",{className:\"anomaly-detected\",children:[\"Anomaly Detected: \",ele.anomalyDetected]})]});}):/*#__PURE__*/_jsx(_Fragment,{children:\"Loading....\"})})]});}export default AA;","map":{"version":3,"names":["React","useState","useEffect","LoginCredentialsAndQueries","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AA","prop","_useState","_useState2","_slicedToArray","accessToken","setAccessToken","_useState3","_useState4","dataDisplay","setDataDisplay","currentPlant","console","log","plantid","fetchDataz","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","sent","length","t0","error","stop","apply","arguments","fetchData","_ref2","_callee2","now","dtTo","dtFrom","data","_callee2$","_context2","Date","toISOString","replace","getTime","fetch","method","headers","accept","Authorization","json","JSON","stringify","interval","setInterval","clearInterval","className","children","map","ele","machineName","monitorName","anomalyMagnitude","alertTimestamp","anomalyDetected"],"sources":["C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/src/Components/Containers/AA/AA.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./AA.css\";\r\nimport { LoginCredentialsAndQueries } from \"../../../Services/loginCredentialsAndQueries\";\r\n\r\nfunction AA(prop) {\r\n  const [accessToken, setAccessToken] = useState(\"\");\r\n  const [dataDisplay, setDataDisplay] = useState();\r\n\r\n  const currentPlant = prop.currentPlant;\r\n  console.log(\"AA1\", currentPlant[0].plantid, accessToken);\r\n\r\n  useEffect(() => {\r\n    const fetchDataz = async () => {\r\n      try {\r\n        const response = await LoginCredentialsAndQueries();\r\n        if (response.length > 0) {\r\n          console.log(\"responseAA\", response);\r\n          setAccessToken(response);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    fetchDataz();\r\n  }, []);\r\n\r\n  let plantid = currentPlant[0].plantid;\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      let now = new Date();\r\n      let dtTo = now.toISOString().replace(/\\.\\d+Z$/, \"Z\").replace(/:/g, \"%3A\");\r\n      let dtFrom = new Date(now.getTime() - 48 * 60 * 60 * 1000)\r\n        .toISOString()\r\n        .replace(/\\.\\d+Z$/, \"Z\")\r\n        .replace(/:/g, \"%3A\");\r\n\r\n      try {\r\n        const response = await fetch(\r\n          \"https://api-idap.infinite-uptime.com/api/3.0/idap-api/anomaly-alerts?plantIds=\" +\r\n            plantid +\r\n            \"&from=\" +\r\n            dtFrom +\r\n            \"&to=\" +\r\n            dtTo,\r\n          {\r\n            method: \"GET\",\r\n            headers: {\r\n              accept: \"application/json\",\r\n              Authorization: \"Bearer \" + accessToken,\r\n            },\r\n          }\r\n        );\r\n\r\n        const data = await response.json();\r\n        setDataDisplay(data);\r\n        console.log(\"alerts\", JSON.stringify(data));\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    const interval = setInterval(fetchData, 30000); // Fetch data every 30 seconds\r\n\r\n    return () => {\r\n      clearInterval(interval); // Clean up the interval on component unmount\r\n    };\r\n  }, [currentPlant, accessToken]);\r\n\r\n  return (\r\n    <div className=\"content-box\">\r\n      <div className=\"head\">Anomaly Alert</div>\r\n      <div className=\"content-container\">\r\n        {dataDisplay && dataDisplay.data ? (\r\n          dataDisplay.data.map((ele) => (\r\n            <div className=\"content-item\">\r\n              <div className=\"machine-name\">Machine Name: {ele.machineName}</div>\r\n              <div className=\"monitor-name\">Monitor Name: {ele.monitorName}</div>\r\n              <div className=\"anomaly-magnitude\">Anomaly Magnitude: {ele.anomalyMagnitude}</div>\r\n              <div className=\"alert-timestamp\">Alert Timestamp: {ele.alertTimestamp}</div>\r\n              <div className=\"anomaly-detected\">Anomaly Detected: {ele.anomalyDetected}</div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <>Loading....</>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AA;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}