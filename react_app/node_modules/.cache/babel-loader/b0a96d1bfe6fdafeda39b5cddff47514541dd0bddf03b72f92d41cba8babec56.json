{"ast":null,"code":"import _objectSpread from\"C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"./Header.css\";import KPI from\"./KPI\";import{Image}from\"../../Services/image\";import{LoginCredentialsAndQueries}from\"../../Services/loginCredentialsAndQueries\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Header(prop){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),imageUrl=_useState2[0],setImageUrl=_useState2[1];// Initialize with the initial kipobj value\n//console.log(\"kpimachines\"+prop.kpimachines)\nvar initialKipobj={kpi1:{title:\"\",value:\"Total Devices Installed\"},kpi2:{title:\"\",value:\"Total Machines Digitized\"},kpi3:{title:\"3\",value:\"Total Faults Identified\"},kpi4:{title:\"4\",value:\"Reports Closed\"},kpi5:{title:\"5\",value:\"Downtime Saved (Hrs)\"}};console.log(\"kpimonitors\"+prop.kpimonitors,initialKipobj.kpi1.title);var _useState3=useState(initialKipobj),_useState4=_slicedToArray(_useState3,2),kipobj=_useState4[0],setKipobj=_useState4[1];useEffect(function(){var fetchDataz=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Image();case 3:response=_context.sent;if(response.length>0){console.log(\"imageurl\",response);setImageUrl(response);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchDataz(){return _ref.apply(this,arguments);};}();fetchDataz();},[]);useEffect(function(){var fetchPlantDetails=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var plantid,token,kpidatafinal,kpidata,updatedKipobj;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;plantid=prop.currentPlant[0].plantid;_context2.next=4;return LoginCredentialsAndQueries();case 4:token=_context2.sent;_context2.next=7;return fetch('https://api-idap.infinite-uptime.com/api/3.0/idap-api/service-requests/analytics?plantIds='+plantid,{method:'GET',headers:{'Authorization':'Bearer '+token,'accept':\"*/*\"}});case 7:kpidatafinal=_context2.sent;_context2.next=10;return kpidatafinal.json();case 10:kpidata=_context2.sent;console.log(\"downtime\"+JSON.stringify(kpidata.data[0]));updatedKipobj=_objectSpread(_objectSpread({},kipobj),{},{kpi4:_objectSpread(_objectSpread({},kipobj.kpi4),{},{title:JSON.stringify(kpidata.data[0].completedCount)}),kpi5:_objectSpread(_objectSpread({},kipobj.kpi5),{},{title:JSON.stringify(kpidata.data[0].downtime)}),kpi2:_objectSpread(_objectSpread({},kipobj.kpi2),{},{title:JSON.stringify(prop.kpimachines)}),kpi3:_objectSpread(_objectSpread({},kipobj.kpi3),{},{title:JSON.stringify(kpidata.data[0].newCount)}),//totaldevicesinstalled\nkpi1:_objectSpread(_objectSpread({},kipobj.kpi1),{},{title:JSON.stringify(prop.kpimonitors)})});if(prop.kpimachines){setKipobj(updatedKipobj);}_context2.next=19;break;case 16:_context2.prev=16;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 19:case\"end\":return _context2.stop();}},_callee2,null,[[0,16]]);}));return function fetchPlantDetails(){return _ref2.apply(this,arguments);};}();fetchPlantDetails();},[prop.currentPlant,prop]);return/*#__PURE__*/_jsxs(\"div\",{className:\"kpis\",children:[/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"Plant\"}),Object.keys(kipobj).map(function(ele){return/*#__PURE__*/_jsx(KPI,{data:kipobj[ele]});})]});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","KPI","Image","LoginCredentialsAndQueries","jsx","_jsx","jsxs","_jsxs","Header","prop","_useState","_useState2","_slicedToArray","imageUrl","setImageUrl","initialKipobj","kpi1","title","value","kpi2","kpi3","kpi4","kpi5","console","log","kpimonitors","_useState3","_useState4","kipobj","setKipobj","fetchDataz","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","sent","length","t0","error","stop","apply","arguments","fetchPlantDetails","_ref2","_callee2","plantid","token","kpidatafinal","kpidata","updatedKipobj","_callee2$","_context2","currentPlant","fetch","method","headers","json","JSON","stringify","data","_objectSpread","completedCount","downtime","kpimachines","newCount","className","children","src","alt","Object","keys","map","ele"],"sources":["C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/src/Components/Header/Header.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Header.css\";\r\nimport KPI from \"./KPI\";\r\nimport { Image } from \"../../Services/image\";\r\nimport { LoginCredentialsAndQueries } from \"../../Services/loginCredentialsAndQueries\";\r\n\r\n\r\n  \r\nfunction Header(prop) {\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n   // Initialize with the initial kipobj value\r\n  //console.log(\"kpimachines\"+prop.kpimachines)\r\n  const initialKipobj = {\r\n    kpi1: {\r\n      title: \"\",\r\n      value: \"Total Devices Installed\",\r\n    },\r\n    kpi2: { title: \"\", value: \"Total Machines Digitized\" },\r\n    kpi3: { title: \"3\", value: \"Total Faults Identified\" },\r\n    kpi4: { title: \"4\", value: \"Reports Closed\" },\r\n    kpi5: { title: \"5\", value: \"Downtime Saved (Hrs)\" },\r\n  };\r\n  console.log(\"kpimonitors\"+prop.kpimonitors,initialKipobj.kpi1.title)\r\n  const [kipobj, setKipobj] = useState(initialKipobj);\r\n  \r\n  useEffect(() => {\r\n    const fetchDataz = async () => {\r\n      try {\r\n        const response = await Image();\r\n        if (response.length > 0) {\r\n          console.log(\"imageurl\", response);\r\n          setImageUrl(response);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    fetchDataz();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchPlantDetails = async () => {\r\n      try {\r\n        let plantid = prop.currentPlant[0].plantid;\r\n        let token=await LoginCredentialsAndQueries();\r\n        \r\n         const kpidatafinal= await fetch('https://api-idap.infinite-uptime.com/api/3.0/idap-api/service-requests/analytics?plantIds='+plantid,{\r\n            method: 'GET',\r\n            headers:{\r\n              'Authorization':'Bearer '+ token,\r\n              'accept': \"*/*\",\r\n            },\r\n\r\n          });\r\n        let  kpidata = await kpidatafinal.json();\r\n        console.log(\"downtime\"+JSON.stringify(kpidata.data[0]));\r\n        \r\n        \r\n\r\n        const updatedKipobj = {\r\n          ...kipobj,\r\n          kpi4: {\r\n            ...kipobj.kpi4,\r\n            title: JSON.stringify(kpidata.data[0].completedCount),\r\n          },\r\n          kpi5: {\r\n            ...kipobj.kpi5,\r\n            title:JSON.stringify(kpidata.data[0].downtime),\r\n          },\r\n          kpi2:{\r\n            ...kipobj.kpi2,\r\n            title:\r\n            JSON.stringify(prop.kpimachines)\r\n          },\r\n          kpi3: {\r\n            ...kipobj.kpi3,\r\n            title:\r\n            JSON.stringify(kpidata.data[0].newCount)\r\n          },\r\n         //totaldevicesinstalled\r\n          kpi1: {\r\n            ...kipobj.kpi1,\r\n            title:\r\n            JSON.stringify(prop.kpimonitors)\r\n          }\r\n        };\r\n        if(prop.kpimachines){\r\n       setKipobj(updatedKipobj);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    fetchPlantDetails();\r\n  }, [prop.currentPlant,prop]);\r\n\r\n  return (\r\n    <div className=\"kpis\">\r\n      <img src={imageUrl} alt=\"Plant\" />\r\n      {/* <div className=\"PlantName\"></div> */}\r\n      {/* 5kpi boxes with plant data */}\r\n      {Object.keys(kipobj).map(function (ele) {\r\n        return <KPI data={kipobj[ele]} />;\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}