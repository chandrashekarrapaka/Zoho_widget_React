{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/chandrashekar.rapaka/Desktop/git/Zoho_widget_React/react_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/chandrashekar.rapaka/Desktop/git/Zoho_widget_React/react_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/chandrashekar.rapaka/Desktop/git/Zoho_widget_React/react_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/chandrashekar.rapaka/Desktop/git/Zoho_widget_React/react_app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import KPIofPlant from\"./KPIofPlant\";import{Image}from\"../../Services/image\";import{LoginCredentialsAndQueries}from\"../../Services/loginCredentialsAndQueries\";import icon1 from'../../assets/imgs/about-white-icon-1.png';import icon2 from'../../assets/imgs/about-white-icon-2.png';import icon3 from'../../assets/imgs/about-white-icon-3.png';import icon4 from'../../assets/imgs/about-white-icon-4.png';import icon5 from'../../assets/imgs/about-white-icon-5.png';import test from'../../assets/imgs/icons8-wi-fi-off-30.png';import{jsx as _jsx}from\"react/jsx-runtime\";function Header(prop){var initialKipobj={kpi1:{title:\"\",value:\"Total Devices Installed\",src:icon1},kpi2:{title:\"\",value:\"Total Machines Digitized\",src:icon2},kpi3:{title:\"\",value:\"Total Faults Identified\",src:icon3},kpi4:{title:\"\",value:\"Reports Closed\",src:icon4},kpi5:{title:\"\",value:\"Downtime Saved (Hrs)\",src:icon5},kpi6:{title:\"\",value:\"Disconnected\",src:test}};var _useState=useState(initialKipobj),_useState2=_slicedToArray(_useState,2),kipobj=_useState2[0],setKipobj=_useState2[1];// console.log(prop.kpidisconnected);\nuseEffect(function(){var fetchPlantDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var plantid,token,kpidatafinal,kpidata,kpidatalength,updatedKipobj;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;plantid=prop.currentPlant[0].plantid;_context.next=4;return LoginCredentialsAndQueries();case 4:token=_context.sent;_context.next=7;return fetch('https://api.infinite-uptime.com/api/3.0/idap-api/service-requests/analytics?plantIds='+plantid,{method:'GET',headers:{'Authorization':'Bearer '+token,'accept':\"*/*\"}});case 7:kpidatafinal=_context.sent;_context.next=10;return kpidatafinal.json();case 10:kpidata=_context.sent;kpidatalength=kpidata.data.length;//console.log(\"downtime\"+JSON.stringify(kpidatalength));\nif(kpidatalength!=0){updatedKipobj=_objectSpread(_objectSpread({},kipobj),{},{kpi4:_objectSpread(_objectSpread({},kipobj.kpi4),{},{title:JSON.stringify(kpidata.data[0].completedCount)}),kpi5:_objectSpread(_objectSpread({},kipobj.kpi5),{},{title:JSON.stringify(kpidata.data[0].downtime)}),kpi2:_objectSpread(_objectSpread({},kipobj.kpi2),{},{title:JSON.stringify(prop.kpimachines)}),kpi3:_objectSpread(_objectSpread({},kipobj.kpi3),{},{title:JSON.stringify(kpidata.data[0].newCount+kpidata.data[0].completedCount)}),kpi6:_objectSpread(_objectSpread({},kipobj.kpi6),{},{title:JSON.stringify(prop.kpidisconnected)}),//totaldevicesinstalled\nkpi1:_objectSpread(_objectSpread({},kipobj.kpi1),{},{title:JSON.stringify(prop.kpimonitors)})});setKipobj(updatedKipobj);}else{initialKipobj.kpi2.title=JSON.stringify(prop.kpimachines);initialKipobj.kpi1.title=JSON.stringify(prop.kpimonitors);initialKipobj.kpi3.title='-';initialKipobj.kpi4.title='-';initialKipobj.kpi5.title='-';initialKipobj.kpi6.title=JSON.stringify(prop.kpidisconnected);setKipobj(initialKipobj);}_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,15]]);}));return function fetchPlantDetails(){return _ref.apply(this,arguments);};}();fetchPlantDetails();},[prop.currentPlant,prop.kpimachines,prop.kpimonitors,prop.kpidisconnected]);//console.log(\"rresult\"+result);\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"boxes-section row\",children:Object.keys(kipobj).map(function(ele){return/*#__PURE__*/_jsx(KPIofPlant,{data:kipobj[ele]});})});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","KPIofPlant","Image","LoginCredentialsAndQueries","icon1","icon2","icon3","icon4","icon5","test","jsx","_jsx","Header","prop","initialKipobj","kpi1","title","value","src","kpi2","kpi3","kpi4","kpi5","kpi6","_useState","_useState2","_slicedToArray","kipobj","setKipobj","fetchPlantDetails","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","plantid","token","kpidatafinal","kpidata","kpidatalength","updatedKipobj","wrap","_callee$","_context","prev","next","currentPlant","sent","fetch","method","headers","json","data","length","_objectSpread","JSON","stringify","completedCount","downtime","kpimachines","newCount","kpidisconnected","kpimonitors","t0","console","error","stop","apply","arguments","className","children","Object","keys","map","ele"],"sources":["C:/Users/chandrashekar.rapaka/Desktop/git/Zoho_widget_React/react_app/src/Components/Header/Header.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport KPIofPlant from \"./KPIofPlant\";\r\nimport { Image } from \"../../Services/image\";\r\nimport { LoginCredentialsAndQueries } from \"../../Services/loginCredentialsAndQueries\";\r\nimport icon1 from '../../assets/imgs/about-white-icon-1.png';\r\nimport icon2 from '../../assets/imgs/about-white-icon-2.png';\r\nimport icon3 from '../../assets/imgs/about-white-icon-3.png';\r\nimport icon4 from '../../assets/imgs/about-white-icon-4.png';\r\nimport icon5 from '../../assets/imgs/about-white-icon-5.png';\r\nimport test from '../../assets/imgs/icons8-wi-fi-off-30.png';\r\n\r\n\r\n\r\n\r\n  \r\nfunction Header(prop) {\r\n  \r\n  const initialKipobj = {\r\n    kpi1: {\r\n      title: \"\",\r\n      value: \"Total Devices Installed\",\r\n      src:icon1\r\n    },\r\n    kpi2: { title: \"\", value: \"Total Machines Digitized\",src:icon2},\r\n    kpi3: { title: \"\", value: \"Total Faults Identified\",src:icon3 },\r\n    kpi4: { title: \"\", value: \"Reports Closed\",src:icon4 },\r\n    kpi5: { title: \"\", value: \"Downtime Saved (Hrs)\",src:icon5 },\r\n    kpi6: { title: \"\", value: \"Disconnected\" ,src:test },\r\n  };\r\n  \r\n  const [kipobj, setKipobj] = useState(initialKipobj);\r\n\r\n // console.log(prop.kpidisconnected);\r\n\r\n  useEffect(() => {\r\n    const fetchPlantDetails = async () => {\r\n      try {\r\n        let plantid = prop.currentPlant[0].plantid;\r\n        let token=await LoginCredentialsAndQueries();\r\n        \r\n         const kpidatafinal= await fetch('https://api.infinite-uptime.com/api/3.0/idap-api/service-requests/analytics?plantIds='+plantid,{\r\n            method: 'GET',\r\n            headers:{\r\n              'Authorization':'Bearer '+ token,\r\n              'accept': \"*/*\",\r\n            },\r\n\r\n          });\r\n          //console.log(kpidatafinal.json());\r\n        let  kpidata = await kpidatafinal.json();\r\n        let kpidatalength=kpidata.data.length;\r\n        //console.log(\"downtime\"+JSON.stringify(kpidatalength));\r\n        \r\n        \r\n        if(kpidatalength!=0){\r\n        const updatedKipobj = {\r\n          ...kipobj,\r\n          kpi4: {\r\n            ...kipobj.kpi4,\r\n            title: JSON.stringify(kpidata.data[0].completedCount),\r\n          },\r\n          kpi5: {\r\n            ...kipobj.kpi5,\r\n            title:JSON.stringify(kpidata.data[0].downtime),\r\n          },\r\n          kpi2:{\r\n            ...kipobj.kpi2,\r\n            title:\r\n            JSON.stringify(prop.kpimachines)\r\n          },\r\n          kpi3: {\r\n            ...kipobj.kpi3,\r\n            title:\r\n            JSON.stringify(kpidata.data[0].newCount+kpidata.data[0].completedCount)\r\n          },\r\n          kpi6: {\r\n            ...kipobj.kpi6,\r\n            title:\r\n            JSON.stringify(prop.kpidisconnected)\r\n          },\r\n         //totaldevicesinstalled\r\n          kpi1: {\r\n            ...kipobj.kpi1,\r\n            title:\r\n            JSON.stringify(prop.kpimonitors)\r\n          }\r\n        };\r\n        \r\n       setKipobj(updatedKipobj);\r\n      }\r\n      else{\r\n        initialKipobj.kpi2.title=JSON.stringify(prop.kpimachines);\r\n        initialKipobj.kpi1.title=JSON.stringify(prop.kpimonitors);\r\n        initialKipobj.kpi3.title='-';\r\n        initialKipobj.kpi4.title='-';\r\n        initialKipobj.kpi5.title='-';\r\n        initialKipobj.kpi6.title= JSON.stringify(prop.kpidisconnected);\r\n        setKipobj(initialKipobj); \r\n      }\r\n        \r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    };\r\n\r\n    fetchPlantDetails();\r\n  }, [prop.currentPlant,prop.kpimachines,prop.kpimonitors,prop.kpidisconnected ]);\r\n  \r\n  //console.log(\"rresult\"+result);\r\n  return (\r\n    <div className=\"boxes-section row\">\r\n      {Object.keys(kipobj).map(function (ele) {\r\n        return <KPIofPlant data={kipobj[ele]} />;\r\n      })}\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}