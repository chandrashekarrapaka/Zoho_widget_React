{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\demo\\\\Desktop\\\\CRV\\\\Zoho_widget_React\\\\react_app\\\\src\\\\Components\\\\Containers\\\\Plant\\\\Machine.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Pie } from \"react-chartjs-2\";\nimport { Velocity } from \"../../../Services/Velocity\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Machine(prop) {\n  _s();\n  const [showPopup, setShowPopup] = useState(false);\n  const [apiData, setApiData] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await Velocity();\n        setApiData(response); // Update state with API data\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchData();\n\n    // Fetch API data every 30 seconds\n    const interval = setInterval(fetchData, 30000);\n    return () => clearInterval(interval);\n  }, []);\n  const getChartData = machine => {\n    const monitors = machine.monitors.length;\n    const healthScores = machine.monitors.map(monitor => monitor.healthScore).filter(healthScore => healthScore !== undefined);\n    const healthScorePercentages = [healthScores.filter(score => score < 100).length, healthScores.filter(score => score < 75).length, healthScores.filter(score => score < 50).length, healthScores.filter(score => score < 25).length];\n    return {\n      // labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\n      datasets: [{\n        data: healthScorePercentages,\n        backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E']\n      }],\n      options: {\n        legend: {\n          display: false\n        }\n      }\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cement-mill-sec\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cement-mill-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [prop.machine.map((machine, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg col-20 mb-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: \"bold\"\n            },\n            children: machine.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Pie, {\n            data: getChartData(machine),\n            width: 200,\n            height: 200,\n            options: {\n              maintainAspectRatio: false,\n              responsive: false\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Health Score: \" + machine.healthScore, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 58\n            }, this), \"Status: \" + machine.status, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 90\n            }, this), \"MG: \" + machine.mg]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)), showPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup\",\n          id: \"exampleModal\",\n          tabIndex: \"-1\",\n          \"aria-labelledby\": \"exampleModalLabel\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(Machine, \"eoTXHDXX6B5oJ4bNysck6aLuBPQ=\");\n_c = Machine;\nexport default Machine;\nvar _c;\n$RefreshReg$(_c, \"Machine\");","map":{"version":3,"names":["React","useState","useEffect","Pie","Velocity","jsxDEV","_jsxDEV","Machine","prop","_s","showPopup","setShowPopup","apiData","setApiData","fetchData","response","error","console","log","interval","setInterval","clearInterval","getChartData","machine","monitors","length","healthScores","map","monitor","healthScore","filter","undefined","healthScorePercentages","score","datasets","data","backgroundColor","options","legend","display","className","children","index","style","fontWeight","name","fileName","_jsxFileName","lineNumber","columnNumber","width","height","maintainAspectRatio","responsive","status","mg","id","tabIndex","_c","$RefreshReg$"],"sources":["C:/Users/demo/Desktop/CRV/Zoho_widget_React/react_app/src/Components/Containers/Plant/Machine.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Velocity } from \"../../../Services/Velocity\";\r\n\r\nfunction Machine(prop) {\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [apiData, setApiData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await Velocity();\r\n        setApiData(response); // Update state with API data\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    // Fetch API data every 30 seconds\r\n    const interval = setInterval(fetchData, 30000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const getChartData = (machine) => {\r\n    const monitors = machine.monitors.length;\r\n\r\n    const healthScores = machine.monitors\r\n      .map((monitor) => monitor.healthScore)\r\n      .filter((healthScore) => healthScore !== undefined);\r\n\r\n    const healthScorePercentages = [\r\n      healthScores.filter((score) => score < 100).length,\r\n      healthScores.filter((score) => score < 75).length,\r\n      healthScores.filter((score) => score < 50).length,\r\n      healthScores.filter((score) => score < 25).length,\r\n    ];\r\n\r\n    return {\r\n      // labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\r\n      datasets: [\r\n        {\r\n          data: healthScorePercentages,\r\n          backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E'],\r\n        },\r\n      ],\r\n      options: {\r\n        legend: {\r\n          display: false,\r\n        },\r\n      },\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"cement-mill-sec\" >\r\n      <div className=\"cement-mill-wrapper\">\r\n        <div className=\"row\">\r\n          {prop.machine.map((machine, index) => (\r\n            \r\n            <div key={index} className=\"col-lg col-20 mb-1\">\r\n              <div style={{fontWeight:\"bold\"}}>{machine.name}</div>\r\n              <Pie data={getChartData(machine)} width={200}   height={200} options={{\r\n                maintainAspectRatio: false,\r\n                responsive: false,\r\n                \r\n                \r\n              }} />\r\n              <div>{\"Health Score: \"+machine.healthScore}<br/>{\"Status: \"+machine.status}<br/>{\"MG: \"+machine.mg}</div>\r\n              {/* {console.log(machine)} */}\r\n            </div>\r\n          ))}\r\n          {showPopup && (\r\n            <div\r\n              className=\"popup\"\r\n              id=\"exampleModal\"\r\n              tabIndex=\"-1\"\r\n              aria-labelledby=\"exampleModalLabel\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              {/* ... Popup content ... */}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Machine;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}