{"ast":null,"code":"export async function Velocity() {\n  let accessToken = \"\";\n  const arrayOfPlants = [];\n  const arrayOfMachines = [];\n  //   const handleScriptLoad = async() => {\n\n  //     console.log(\"hero\")\n  //     // await window.ZOHO.CREATOR.init().then(function(data) {\n\n  //     //  // var queryParams = window.ZOHO.CREATOR.UTIL.getQueryParams();\n  //     //  const email=\"rapaka.chandrashekar@gmail.com\";//Stage == \\\"Open\\\"\n  //     //    var config = {\n  //     //     appName: \"infinite-control-room\",\n  //     //     reportName: \"All_Users\",\n  //     //     criteria: \"Username ==\\\"rapaka.chandrashekar@gmail.com\\\"\",\n  //     //     page: \"1\",\n  //     //     pageSize: \"100\"\n  //     //   }\n\n  //     //   //get all records API\n  //     //   window.ZOHO.CREATOR.API.getAllRecords(config).then(function (response) {\n  //     //     //callback block\n  //     //     let userData = response;\n\n  //     //     accessToken=JSON.stringify(userData.data[0].Access_Token);\n  //     //     console.log(\"userData\"+JSON.stringify(userData.data[0].Access_Token));\n  //     //    // console.log(\"check\"+accessToken);\n  //     //    // return accessToken;\n  //     //   });\n\n  //     // });\n\n  //   };\n  //  await handleScriptLoad();\n\n  try {\n    const loginResponse = await window.ZOHO.CREATOR.init().then(function (data) {\n      let accessTokenz = \"\";\n      var config = {\n        appName: \"infinite-control-room\",\n        reportName: \"All_Users\",\n        criteria: \"Username ==\\\"rapaka.chandrashekar@gmail.com\\\"\",\n        page: \"1\",\n        pageSize: \"100\"\n      };\n      const access = window.ZOHO.CREATOR.API.getAllRecords(config).then(function (response) {\n        let userData = response;\n        accessTokenz = userData.data[0].Access_Token;\n        console.log(\"userData\" + JSON.stringify(userData.data[0].Access_Token));\n        // console.log(\"check\"+accessToken);\n        // return accessToken;\n        return accessTokenz;\n      });\n      return access;\n    });\n    const queryParams = await window.ZOHO.CREATOR.init().then(function (data) {\n      return window.ZOHO.CREATOR.UTIL.getQueryParams();\n    });\n    const loginData = await loginResponse;\n    // console.log(\"loginData\"+ loginData);\n    accessToken = loginData;\n    //accessToken=\"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyY0NxRnpxRXJrNU5GS1RjTi1YSk1IdE9NS2tWVTZXS1hIdHZFMF8xZE5ZIn0.eyJleHAiOjE2ODY5NTQ5OTEsImlhdCI6MTY4NjkxMTc5MSwianRpIjoiNDU0MGQ1MTctNjE1ZS00NDZmLTgxOTgtNTc1YzY1ZjUwZmM3IiwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS5pbmZpbml0ZS11cHRpbWUuY29tL3JlYWxtcy9pZGFwIiwic3ViIjoiZjo2MGNhNzY4Yy1iMTA0LTQ0OTktYjU4Yy05MzliOTdlNzAzM2Q6ODcxMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImlkYXAiLCJzZXNzaW9uX3N0YXRlIjoiNGQ0YjUzMDAtM2NlZC00ZTk5LTlmNDEtYmRjMDI0ZjJkMzhlIiwic2NvcGUiOiJlbWFpbCIsInNpZCI6IjRkNGI1MzAwLTNjZWQtNGU5OS05ZjQxLWJkYzAyNGYyZDM4ZSIsImlzX2FkbWluIjoiZmFsc2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlkYXBfcm9sZSI6IlJPTEVfVVNFUiIsImVtYWlsIjoiUmFwYWthLmNoYW5kcmFzaGVrYXJAZ21haWwuY29tIn0.l8NL7t1Kqf77hOHo_kGSpcKzDoSjFFYmKdyn3y6-fC45B_ICvvYz_FLMfazPMOxVzMG0nb0nD88y_J45wFYTjLnfwbZbIzw--vbVKt1EMe4qK6ko4wv1jTRrjg97m7PaQL3FLcv1JSPafJ8ukPm1z4BPo0tpoHlbZX1vCGwm1ZgdJqTBM6bJrtrLyB1EcABWsXIbd7r_756vua7sOO_7ZkAppAiHTV3qqjM5N0cjHaKTkMXYAiVkl6kBpsZf7N8CCdwkZTKV3rapK_zQGJhS2VxSNkeiERF2Y16nyPxSjxyzQFBB6I0AB2xqSSWlhJ6Shk2yaaI1MB9_cdt8oOgJPg\";\n    console.log(\"queryParams\" + JSON.stringify(queryParams));\n\n    //console.log(\"accessToken\"+accessToken);\n    //console.log(\"check\"+ accessToken);\n\n    let orgid = queryParams.PlantId.split(\",\")[1];\n    const orgidAll = queryParams.PlantId.split(\",\");\n    let plantsData;\n    let plantsResponse;\n    plantsResponse = await Promise.all(orgidAll.map(async orgid => {\n      plantsResponse = await fetch(`https://api-idap.infinite-uptime.com/api/2.0/md/monitoring/bymonitors?plantId=${orgid}`, {\n        method: 'GET',\n        headers: {\n          'accept': 'application/json',\n          'Authorization': 'Bearer ' + accessToken\n        }\n      });\n      plantsData = await plantsResponse.json();\n      const plantsArray = [];\n      console.log(\"plantsdatavelocity\", plantsData.data.machineGroups);\n      plantsData.data.machineGroups.map(mg => {\n        //console.log(\"plantsdata\", mg.machines);\n        mg.machines.map(machine => {\n          machine.mg = mg.name;\n          machine.plantName = plantsData.data.name;\n          plantsArray.push(machine);\n        });\n        arrayOfMachines.push(plantsArray);\n      });\n      arrayOfPlants.push(plantsData.data);\n    }));\n    //console.log(\"check\"+ headers);\n\n    arrayOfPlants.map(ele => {\n      console.log(\"arrayOfPlantsvelocity\", ele);\n    });\n    console.log(\"velocityarrayofMachines\", arrayOfMachines);\n\n    //  return arrayOfMachines;\n    const machinesArray = [];\n    arrayOfMachines.map(elemg => {\n      elemg.map(elem => {\n        machinesArray.push(elem);\n      });\n    });\n    console.log(\"velocityData\", machinesArray);\n    return machinesArray;\n    // console.log(\"newMachines\"+JSON.stringify(newMachines));\n    // return newMachines;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n}\n_c = Velocity;\nvar _c;\n$RefreshReg$(_c, \"Velocity\");","map":{"version":3,"names":["Velocity","accessToken","arrayOfPlants","arrayOfMachines","loginResponse","window","ZOHO","CREATOR","init","then","data","accessTokenz","config","appName","reportName","criteria","page","pageSize","access","API","getAllRecords","response","userData","Access_Token","console","log","JSON","stringify","queryParams","UTIL","getQueryParams","loginData","orgid","PlantId","split","orgidAll","plantsData","plantsResponse","Promise","all","map","fetch","method","headers","json","plantsArray","machineGroups","mg","machines","machine","name","plantName","push","ele","machinesArray","elemg","elem","error","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Desktop/zoho-creator-widget-starter-template-reactJS/react_app/src/Services/Velocity.js"],"sourcesContent":["\r\nexport async function Velocity() {\r\n    let accessToken=\"\";\r\n    const arrayOfPlants=[];\r\n    const arrayOfMachines=[];\r\n  //   const handleScriptLoad = async() => {\r\n      \r\n  //     console.log(\"hero\")\r\n  //     // await window.ZOHO.CREATOR.init().then(function(data) {\r\n        \r\n  //     //  // var queryParams = window.ZOHO.CREATOR.UTIL.getQueryParams();\r\n  //     //  const email=\"rapaka.chandrashekar@gmail.com\";//Stage == \\\"Open\\\"\r\n  //     //    var config = {\r\n  //     //     appName: \"infinite-control-room\",\r\n  //     //     reportName: \"All_Users\",\r\n  //     //     criteria: \"Username ==\\\"rapaka.chandrashekar@gmail.com\\\"\",\r\n  //     //     page: \"1\",\r\n  //     //     pageSize: \"100\"\r\n  //     //   }\r\n    \r\n  //     //   //get all records API\r\n  //     //   window.ZOHO.CREATOR.API.getAllRecords(config).then(function (response) {\r\n  //     //     //callback block\r\n  //     //     let userData = response;\r\n          \r\n  //     //     accessToken=JSON.stringify(userData.data[0].Access_Token);\r\n  //     //     console.log(\"userData\"+JSON.stringify(userData.data[0].Access_Token));\r\n  //     //    // console.log(\"check\"+accessToken);\r\n  //     //    // return accessToken;\r\n  //     //   });\r\n        \r\n        \r\n  //     // });\r\n     \r\n     \r\n  //   };\r\n  //  await handleScriptLoad();\r\n    \r\n  \r\n  \r\n      try {\r\n         \r\n        const loginResponse =  await window.ZOHO.CREATOR.init().then(function(data) {\r\n          let accessTokenz=\"\";\r\n        \r\n        \r\n         var config = {\r\n          appName: \"infinite-control-room\",\r\n          reportName: \"All_Users\",\r\n          criteria: \"Username ==\\\"rapaka.chandrashekar@gmail.com\\\"\",\r\n          page: \"1\",\r\n          pageSize: \"100\"\r\n        }\r\n        const access=window.ZOHO.CREATOR.API.getAllRecords(config).then(function (response) {\r\n          let userData = response;\r\n          \r\n          accessTokenz=userData.data[0].Access_Token;\r\n          console.log(\"userData\"+JSON.stringify(userData.data[0].Access_Token));\r\n         // console.log(\"check\"+accessToken);\r\n         // return accessToken;\r\n        return accessTokenz;\r\n        });\r\n        return access;\r\n      });\r\n      const queryParams =  await window.ZOHO.CREATOR.init().then(function(data) { \r\n        return window.ZOHO.CREATOR.UTIL.getQueryParams();\r\n      });\r\n    \r\n        const loginData = await loginResponse;\r\n        // console.log(\"loginData\"+ loginData);\r\n       accessToken = loginData;\r\n        //accessToken=\"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyY0NxRnpxRXJrNU5GS1RjTi1YSk1IdE9NS2tWVTZXS1hIdHZFMF8xZE5ZIn0.eyJleHAiOjE2ODY5NTQ5OTEsImlhdCI6MTY4NjkxMTc5MSwianRpIjoiNDU0MGQ1MTctNjE1ZS00NDZmLTgxOTgtNTc1YzY1ZjUwZmM3IiwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS5pbmZpbml0ZS11cHRpbWUuY29tL3JlYWxtcy9pZGFwIiwic3ViIjoiZjo2MGNhNzY4Yy1iMTA0LTQ0OTktYjU4Yy05MzliOTdlNzAzM2Q6ODcxMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImlkYXAiLCJzZXNzaW9uX3N0YXRlIjoiNGQ0YjUzMDAtM2NlZC00ZTk5LTlmNDEtYmRjMDI0ZjJkMzhlIiwic2NvcGUiOiJlbWFpbCIsInNpZCI6IjRkNGI1MzAwLTNjZWQtNGU5OS05ZjQxLWJkYzAyNGYyZDM4ZSIsImlzX2FkbWluIjoiZmFsc2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlkYXBfcm9sZSI6IlJPTEVfVVNFUiIsImVtYWlsIjoiUmFwYWthLmNoYW5kcmFzaGVrYXJAZ21haWwuY29tIn0.l8NL7t1Kqf77hOHo_kGSpcKzDoSjFFYmKdyn3y6-fC45B_ICvvYz_FLMfazPMOxVzMG0nb0nD88y_J45wFYTjLnfwbZbIzw--vbVKt1EMe4qK6ko4wv1jTRrjg97m7PaQL3FLcv1JSPafJ8ukPm1z4BPo0tpoHlbZX1vCGwm1ZgdJqTBM6bJrtrLyB1EcABWsXIbd7r_756vua7sOO_7ZkAppAiHTV3qqjM5N0cjHaKTkMXYAiVkl6kBpsZf7N8CCdwkZTKV3rapK_zQGJhS2VxSNkeiERF2Y16nyPxSjxyzQFBB6I0AB2xqSSWlhJ6Shk2yaaI1MB9_cdt8oOgJPg\";\r\n         console.log(\"queryParams\"+JSON.stringify(queryParams));\r\n         \r\n        //console.log(\"accessToken\"+accessToken);\r\n        //console.log(\"check\"+ accessToken);\r\n        \r\n        let orgid=queryParams.PlantId.split(\",\")[1];\r\n        const orgidAll=queryParams.PlantId.split(\",\");\r\n      let plantsData;\r\n      let plantsResponse\r\n      plantsResponse=await Promise.all(orgidAll.map(async(orgid)=>{\r\n         plantsResponse = await fetch(`https://api-idap.infinite-uptime.com/api/2.0/md/monitoring/bymonitors?plantId=${orgid}`, {\r\n          method: 'GET',\r\n          headers: {\r\n            'accept': 'application/json',\r\n            'Authorization': 'Bearer '+accessToken,\r\n          },\r\n        });\r\n        plantsData = await plantsResponse.json();\r\n        const plantsArray=[];\r\n         console.log(\"plantsdatavelocity\",  plantsData.data.machineGroups);\r\n        plantsData.data.machineGroups.map((mg)=>{\r\n          //console.log(\"plantsdata\", mg.machines);\r\n          mg.machines.map((machine)=>{\r\n            machine.mg=mg.name;\r\n            machine.plantName=plantsData.data.name;\r\n            plantsArray.push(machine);\r\n          })\r\n          arrayOfMachines.push(plantsArray); \r\n        })\r\n        \r\n        arrayOfPlants.push(plantsData.data);\r\n      }));\r\n        //console.log(\"check\"+ headers);\r\n        \r\n        arrayOfPlants.map((ele)=>{\r\n          console.log(\"arrayOfPlantsvelocity\",ele);\r\n        })\r\n        console.log(\"velocityarrayofMachines\",arrayOfMachines);\r\n        \r\n        //  return arrayOfMachines;\r\n         const machinesArray=[];\r\n         arrayOfMachines.map((elemg)=>{\r\n            elemg.map(elem=>{\r\n                machinesArray.push(elem) \r\n            })\r\n        })\r\n        console.log(\"velocityData\",  machinesArray);\r\n         return machinesArray;\r\n        // console.log(\"newMachines\"+JSON.stringify(newMachines));\r\n        // return newMachines;\r\n  \r\n      } catch (error) {\r\n        console.error(error);\r\n        throw error;\r\n      }\r\n    }\r\n    "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}