{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chandrashekar.rapaka\\\\Desktop\\\\git\\\\Zoho_widget_React\\\\react_app\\\\src\\\\Components\\\\Containers\\\\Plant\\\\Machine.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Doughnut } from 'react-chartjs-2';\nimport Monitor from \"./Monitor\";\nimport './Machine.css';\nimport { Velocity } from '../../../Services/Velocity';\nimport Tablemini from \"./Tablemini\";\nimport icon1 from '../../../assets/imgs/cement-box-icon-1.png';\nimport icon2 from '../../../assets/imgs/cement-box-icon-2.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Machine(prop) {\n  _s();\n  const [showPopup, setShowPopup] = useState(false);\n  const [apiData, setApiData] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await Velocity();\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchData();\n\n    // Fetch API data every 30 seconds\n    const interval = setInterval(fetchData, 30000);\n    return () => clearInterval(interval);\n  }, []);\n  const getChartData = () => {\n    const machines = prop.machine.length;\n    const monitors = prop.machine.reduce((acc, ele) => acc + ele.monitors.length, 0);\n    const healthScores = prop.machine.flatMap(ele => ele.monitors.map(monitor => monitor.healthScore)).filter(healthScore => healthScore !== undefined);\n    const healthScorePercentages = [healthScores.filter(score => score === 1).length, healthScores.filter(score => score === 2).length, healthScores.filter(score => score === 3).length, healthScores.filter(score => score === 4).length];\n    return {\n      labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\n      datasets: [{\n        data: healthScorePercentages,\n        backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E']\n      }]\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cement-mill-sec\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cement-mill-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(Doughnut, {\n          data: getChartData()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), showPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup\",\n          id: \"exampleModal\",\n          tabIndex: \"-1\",\n          \"aria-labelledby\": \"exampleModalLabel\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(Machine, \"eoTXHDXX6B5oJ4bNysck6aLuBPQ=\");\n_c = Machine;\nexport default Machine;\nvar _c;\n$RefreshReg$(_c, \"Machine\");","map":{"version":3,"names":["React","useState","useEffect","Doughnut","Monitor","Velocity","Tablemini","icon1","icon2","jsxDEV","_jsxDEV","Machine","prop","_s","showPopup","setShowPopup","apiData","setApiData","fetchData","response","error","console","log","interval","setInterval","clearInterval","getChartData","machines","machine","length","monitors","reduce","acc","ele","healthScores","flatMap","map","monitor","healthScore","filter","undefined","healthScorePercentages","score","labels","datasets","data","backgroundColor","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","tabIndex","_c","$RefreshReg$"],"sources":["C:/Users/chandrashekar.rapaka/Desktop/git/Zoho_widget_React/react_app/src/Components/Containers/Plant/Machine.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Doughnut } from 'react-chartjs-2';\r\nimport Monitor from \"./Monitor\";\r\nimport './Machine.css';\r\nimport { Velocity } from '../../../Services/Velocity';\r\nimport Tablemini from \"./Tablemini\";\r\nimport icon1 from '../../../assets/imgs/cement-box-icon-1.png';\r\nimport icon2 from '../../../assets/imgs/cement-box-icon-2.png';\r\n\r\nfunction Machine(prop) {\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [apiData, setApiData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await Velocity();\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    // Fetch API data every 30 seconds\r\n    const interval = setInterval(fetchData, 30000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const getChartData = () => {\r\n    const machines = prop.machine.length;\r\n    const monitors = prop.machine.reduce((acc, ele) => acc + ele.monitors.length, 0);\r\n\r\n    const healthScores = prop.machine\r\n      .flatMap((ele) => ele.monitors.map((monitor) => monitor.healthScore))\r\n      .filter((healthScore) => healthScore !== undefined);\r\n\r\n    const healthScorePercentages = [\r\n      healthScores.filter((score) => score === 1).length,\r\n      healthScores.filter((score) => score === 2).length,\r\n      healthScores.filter((score) => score === 3).length,\r\n      healthScores.filter((score) => score === 4).length,\r\n    ];\r\n\r\n    return {\r\n      labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\r\n      datasets: [\r\n        {\r\n          data: healthScorePercentages,\r\n          backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E'],\r\n        },\r\n      ],\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"cement-mill-sec\">\r\n      <div className=\"cement-mill-wrapper\">\r\n        <div className=\"row\">\r\n          <Doughnut data={getChartData()} />\r\n          {showPopup && (\r\n            <div className=\"popup\" id=\"exampleModal\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n              {/* ... Popup content ... */}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Machine;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}