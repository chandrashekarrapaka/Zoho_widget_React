{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\demo\\\\Desktop\\\\CRV\\\\Zoho_widget_React\\\\react_app\\\\src\\\\Components\\\\Containers\\\\Container.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"./Container.css\";\nimport AA from \"./AA/AA\";\nimport MFI from \"./MFI/MFI\";\nimport Pagination from \"../Pagination/Pagination\";\nimport Plant from \"./Plant/Plant\";\nimport { Plants } from \"../../Services/Json\";\nimport Header from \"../Header/Header\";\nimport TotalPlants from \"../TotalPlants\";\nimport AlertBar from '../Containers/ScrollBar/AlertBar';\nimport PatternStorage from \"./PatternStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Container() {\n  _s();\n  var _currentPlant$;\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 15;\n  const [timeIn, setTimeIn] = useState(30000);\n  const [plantsData, setPlantsData] = useState([]);\n  const [currentPlantIndex, setCurrentPlantIndex] = useState(0);\n  const [zoomLevel, setZoomLevel] = useState(0);\n  const [kpimachines, setKpimachines] = useState(0);\n  const [kpidisconnected, setKpiDisconnected] = useState(0);\n  const [kpimonitors, setKpimonitors] = useState(0);\n  const [noData, setNoData] = useState('');\n  const [apicall, setApiCall] = useState(true);\n  const [autoPagination, setAutoPagination] = useState(true);\n  const [PlantSelection, setPlantSelection] = useState(false);\n\n  //screen things\n  ////console.log(\"insidecontainer.js\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await Plants();\n        if (response[1]) {\n          let plants = [];\n          if (response[0]) {\n            response[0].forEach(element => {\n              if (element.length > 0) plants.push(element);\n            });\n            const storedPattern = await fetchProfile();\n            if (storedPattern && storedPattern !== undefined) {\n              const uniqueOrderedIds = [...new Set(JSON.parse(storedPattern))];\n              const uniquePlantIds = plants.map(plant => plant[0].plantid);\n              const patternsMatch = JSON.stringify(uniqueOrderedIds.sort()) === JSON.stringify(uniquePlantIds.sort());\n              if (storedPattern && storedPattern.length > 1 && patternsMatch) {\n                const orderedPattern = JSON.parse(storedPattern);\n                const reorderedPlantsData = orderedPattern.map(plantId => {\n                  const plant = plants.find(plant => plant[0].plantid === plantId);\n                  return plant ? plant : null;\n                }).filter(plant => plant !== null);\n                setPlantsData(reorderedPlantsData);\n              } else {\n                setPlantsData(plants);\n              }\n            } else {\n              setPlantsData(plants);\n            }\n            if (plants.length === 0) {\n              setNoData('No data found');\n            }\n          } else {\n            setNoData('No data found');\n          }\n        } else {\n          setApiCall(false);\n        }\n      } catch (error) {\n        console.error(error);\n        setNoData('Error occurred while fetching data.');\n      }\n    };\n    fetchData();\n  }, [timeIn]);\n  const fetchProfile = async () => {\n    try {\n      const data = await window.ZOHO.CREATOR.init();\n      let userid = window.ZOHO.CREATOR.UTIL.getQueryParams().user;\n      var config = {\n        appName: \"infinite-control-room\",\n        reportName: \"My_Profile_Data\",\n        criteria: \"Username == \\\"\" + userid + \"\\\"\",\n        page: \"1\",\n        pageSize: \"100\"\n      };\n      const response = await window.ZOHO.CREATOR.API.getAllRecords(config);\n      const idx = response.data[0].PlantPattern;\n      console.log(idx);\n      return idx;\n    } catch (error) {\n      console.error(error);\n      // Handle error cases\n      return null; // Or any appropriate value indicating error\n    }\n  };\n\n  useEffect(() => {\n    let timeout;\n    if (autoPagination && plantsData.length > 0 && PlantSelection == false) {\n      const currentPlant = plantsData[currentPlantIndex];\n      setKpimachines(plantsData[currentPlantIndex].length);\n      let kpimonitorsnew = 0;\n      let kpidisconnectednew = 0;\n      plantsData[currentPlantIndex].forEach(mon => {\n        mon.monitors.forEach(ele => {\n          if (ele.status == 5) {\n            // console.log(ele.status,currentPlantIndex);\n            kpidisconnectednew++;\n          }\n        });\n        kpimonitorsnew += mon.monitors.length;\n      });\n      // console.log(currentPlantIndex);\n      setKpiDisconnected(kpidisconnectednew);\n      setKpimonitors(kpimonitorsnew);\n      const totalPages = Math.ceil((currentPlant === null || currentPlant === void 0 ? void 0 : currentPlant.length) / itemsPerPage);\n      // console.log(\"Current Plant Index:\", currentPlantIndex);\n      //console.log(\"Current Page:\", currentPage);\n      //console.log(\"Total Pages:\", totalPages);\n\n      if (currentPage > totalPages) {\n        if (currentPlantIndex === plantsData.length - 1) {\n          timeout = setTimeout(() => {\n            setCurrentPage(1);\n            setCurrentPlantIndex(0);\n          }, 0);\n        } else {\n          timeout = setTimeout(() => {\n            setCurrentPage(1);\n            setCurrentPlantIndex(prevIndex => prevIndex + 1);\n          }, 0);\n        }\n      } else {\n        timeout = setTimeout(() => {\n          setCurrentPage(prevPage => prevPage + 1);\n        }, timeIn);\n      }\n    }\n    return () => clearTimeout(timeout);\n  }, [currentPage, currentPlantIndex, plantsData, autoPagination]);\n  const handleNextPlant = () => {\n    const nextPage = currentPage + 1;\n\n    // If we're at the end of the current plant, switch to the next plant\n    const nextPlantIndex = (currentPlantIndex + 1) % plantsData.length;\n    if (nextPlantIndex > plantsData.length - 1) {\n      setCurrentPlantIndex(nextPlantIndex);\n      setCurrentPage(1);\n    } else {\n      setCurrentPlantIndex(nextPlantIndex);\n      setCurrentPage(1);\n    } // Reset currentPage for the new plant\n    const currentPlant = plantsData[currentPlantIndex];\n    setKpimachines(plantsData[currentPlantIndex].length);\n    let kpimonitorsnew = 0;\n    let kpidisconnectednew = 0;\n    plantsData[currentPlantIndex].forEach(mon => {\n      mon.monitors.forEach(ele => {\n        if (ele.status == 5) {\n          // console.log(ele.status,currentPlantIndex);\n          kpidisconnectednew++;\n        }\n      });\n      kpimonitorsnew += mon.monitors.length;\n    });\n    // console.log(currentPlantIndex);\n    setKpiDisconnected(kpidisconnectednew);\n    setKpimonitors(kpimonitorsnew);\n  };\n  const handlePageChange = pageNumber => {\n    const totalPages = Math.ceil(plantsData[currentPlantIndex].length / itemsPerPage);\n    if (pageNumber <= totalPages) {\n      setCurrentPage(pageNumber);\n      if (pageNumber === totalPages && currentPlantIndex !== plantsData.length - 1) {\n        setTimeout(() => {\n          const nextPlantIndex = currentPlantIndex + 1;\n          setCurrentPage(1);\n          setCurrentPlantIndex(nextPlantIndex);\n        }, timeIn);\n      }\n    }\n  };\n  const handleCheck = () => {\n    setAutoPagination(prevState => !prevState);\n  };\n  const currentPlant = plantsData[currentPlantIndex];\n  const totalPages = Math.ceil((currentPlant === null || currentPlant === void 0 ? void 0 : currentPlant.length) / itemsPerPage);\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentItems = currentPlant ? currentPlant.slice(indexOfFirstItem, indexOfLastItem) : [];\n\n  //  style={{ transform: `scale(${1 + zoomLevel / 100})` }}\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: currentPlant && apicall ? /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"dashboard-sec\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header\",\n          children: [/*#__PURE__*/_jsxDEV(TotalPlants, {\n            plantsData: plantsData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(PatternStorage, {\n            plantsData: plantsData,\n            cp: currentPlant\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-9\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"left-main\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"title-section d-flex mb-2 align-items-center justify-content-between py-2 px-3 bg-white br-10\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-0 fs-4 fw-600\",\n                    children: [\" \", ((_currentPlant$ = currentPlant[0]) === null || _currentPlant$ === void 0 ? void 0 : _currentPlant$.plantName) || \"\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-0 text-gray\",\n                    onClick: e => {\n                      handleNextPlant(currentPlantIndex);\n                    },\n                    children: [\" Coming Next: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      className: \"text-primary\",\n                      style: {\n                        cursor: \"pointer\"\n                      },\n                      children: plantsData[currentPlantIndex + 1] !== undefined ? plantsData[currentPlantIndex + 1][0].plantName : plantsData[0][0].plantName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 234,\n                      columnNumber: 119\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Header, {\n                  kpidisconnected: kpidisconnected,\n                  kpimachines: kpimachines,\n                  kpimonitors: kpimonitors,\n                  currentPlant: currentPlant\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Plant, {\n                  currentItems: currentItems,\n                  NextPlant: plantsData[currentPlantIndex + 1] !== undefined ? plantsData[currentPlantIndex + 1][0].plantName : plantsData[0][0].plantName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pagination-sec\",\n                  style: {\n                    paddingBottom: \"20px\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"pagination-section\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        class: \"pagination-inner-sec\",\n                        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n                          className: \"pagination-block\",\n                          children: /*#__PURE__*/_jsxDEV(Pagination, {\n                            items: currentItems,\n                            currentPage: currentPage,\n                            totalPages: totalPages,\n                            onPageChange: handlePageChange\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 246,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 245,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"stop-auto-pagination\",\n                          children: /*#__PURE__*/_jsxDEV(\"form\", {\n                            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                              onClick: handleCheck,\n                              type: \"checkbox\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 255,\n                              columnNumber: 33\n                            }, this), \"Stop Auto Pagination\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 254,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 253,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 244,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 243,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"health-score-sec\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-lg-3 mb-3 col-md-6 col-sm-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"health-score-box py-2 md:px-3 px-1\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"score-box green\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 269,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-dark fs-14 mb-0 fw-bold\",\n                          children: \"Health Score > 80%\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 270,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 268,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-lg-3 mb-3 col-md-6 col-sm-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"health-score-box py-2 md:px-3 px-1\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"score-box yellow\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 276,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-dark fs-14 mb-0 fw-bold\",\n                          children: \"Health Score > 50% < 80%\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 277,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 275,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-lg-3 mb-3 col-md-6 col-sm-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"health-score-box py-2 md:px-3 px-1\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"score-box red\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 284,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-dark fs-14 mb-0 fw-bold\",\n                          children: \"Health Score < 50%\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 285,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 283,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-lg-3 mb-3 col-md-6 col-sm-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"health-score-box py-2 md:px-3 px-1\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"score-box\",\n                          style: {\n                            backgroundColor: \"white\",\n                            border: \"solid 1px\"\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 292,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-dark fs-14 mb-0 fw-bold \",\n                          children: \"Health Score Not Available\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 293,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 291,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 290,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-lg-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"right-main\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-lg-12 col-md-4 col-sm-6 mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(AA, {\n                      currentPlant: currentPlant\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 306,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-lg-12 col-md-4 col-sm-6 mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(MFI, {\n                      currentPlant: currentPlant\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 309,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 308,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(AlertBar, {\n          currentPlant: currentPlant,\n          plantsData: plantsData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }, this) : apicall === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: `loading....${noData}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 47\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 10\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-again\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: `Invalid Token, Please Login here`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://crv.infinite-uptime.com/#Profile\",\n        target: \"_blank\",\n        children: \"Please click here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 12\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n}\n_s(Container, \"7CLSBKXR2DgtxdThZTU95Zc12Fk=\");\n_c = Container;\nexport default Container;\nvar _c;\n$RefreshReg$(_c, \"Container\");","map":{"version":3,"names":["React","useState","useEffect","AA","MFI","Pagination","Plant","Plants","Header","TotalPlants","AlertBar","PatternStorage","jsxDEV","_jsxDEV","Container","_s","_currentPlant$","currentPage","setCurrentPage","itemsPerPage","timeIn","setTimeIn","plantsData","setPlantsData","currentPlantIndex","setCurrentPlantIndex","zoomLevel","setZoomLevel","kpimachines","setKpimachines","kpidisconnected","setKpiDisconnected","kpimonitors","setKpimonitors","noData","setNoData","apicall","setApiCall","autoPagination","setAutoPagination","PlantSelection","setPlantSelection","fetchData","response","plants","forEach","element","length","push","storedPattern","fetchProfile","undefined","uniqueOrderedIds","Set","JSON","parse","uniquePlantIds","map","plant","plantid","patternsMatch","stringify","sort","orderedPattern","reorderedPlantsData","plantId","find","filter","error","console","data","window","ZOHO","CREATOR","init","userid","UTIL","getQueryParams","user","config","appName","reportName","criteria","page","pageSize","API","getAllRecords","idx","PlantPattern","log","timeout","currentPlant","kpimonitorsnew","kpidisconnectednew","mon","monitors","ele","status","totalPages","Math","ceil","setTimeout","prevIndex","prevPage","clearTimeout","handleNextPlant","nextPage","nextPlantIndex","handlePageChange","pageNumber","handleCheck","prevState","indexOfLastItem","indexOfFirstItem","currentItems","slice","children","className","fileName","_jsxFileName","lineNumber","columnNumber","cp","plantName","onClick","e","style","cursor","NextPlant","paddingBottom","class","items","onPageChange","type","backgroundColor","border","textAlign","href","target","_c","$RefreshReg$"],"sources":["C:/Users/demo/Desktop/CRV/Zoho_widget_React/react_app/src/Components/Containers/Container.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Container.css\";\r\nimport AA from \"./AA/AA\";\r\nimport MFI from \"./MFI/MFI\";\r\nimport Pagination from \"../Pagination/Pagination\";\r\nimport Plant from \"./Plant/Plant\";\r\nimport { Plants } from \"../../Services/Json\";\r\nimport Header from \"../Header/Header\";\r\nimport TotalPlants from \"../TotalPlants\";\r\nimport AlertBar from '../Containers/ScrollBar/AlertBar';\r\nimport PatternStorage from \"./PatternStorage\";\r\n\r\nfunction Container() {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 15;\r\n  const [timeIn, setTimeIn] = useState(30000);\r\n  const [plantsData, setPlantsData] = useState([]);\r\n  const [currentPlantIndex, setCurrentPlantIndex] = useState(0);\r\n  const [zoomLevel, setZoomLevel] = useState(0);\r\n  const [kpimachines, setKpimachines] = useState(0);\r\n  const [kpidisconnected, setKpiDisconnected] = useState(0);\r\n  const [kpimonitors, setKpimonitors] = useState(0);\r\n  const [noData, setNoData] = useState('');\r\n  const [apicall, setApiCall] = useState(true);\r\n  const [autoPagination, setAutoPagination] = useState(true); \r\n  const [PlantSelection,setPlantSelection]=useState(false);\r\n\r\n  //screen things\r\n  ////console.log(\"insidecontainer.js\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await Plants();\r\n\r\n        if (response[1]) {\r\n          let plants = [];\r\n\r\n          if (response[0]) {\r\n            response[0].forEach(element => {\r\n              if (element.length > 0) plants.push(element);\r\n            });\r\n\r\n            const storedPattern = await fetchProfile();\r\n\r\n            if (storedPattern && storedPattern !== undefined) {\r\n              const uniqueOrderedIds = [...new Set(JSON.parse(storedPattern))];\r\n              const uniquePlantIds = plants.map(plant => plant[0].plantid);\r\n              const patternsMatch = JSON.stringify(uniqueOrderedIds.sort()) === JSON.stringify(uniquePlantIds.sort());\r\n\r\n              if (storedPattern && storedPattern.length > 1 && patternsMatch) {\r\n                const orderedPattern = JSON.parse(storedPattern);\r\n                const reorderedPlantsData = orderedPattern.map((plantId) => {\r\n                  const plant = plants.find((plant) => plant[0].plantid === plantId);\r\n                  return plant ? plant : null;\r\n                }).filter((plant) => plant !== null);\r\n\r\n                setPlantsData(reorderedPlantsData);\r\n              } else {\r\n                setPlantsData(plants);\r\n              }\r\n            } else {\r\n              setPlantsData(plants);\r\n            }\r\n\r\n            if (plants.length === 0) {\r\n              setNoData('No data found');\r\n            }\r\n          } else {\r\n            setNoData('No data found');\r\n          }\r\n        } else {\r\n          setApiCall(false);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        setNoData('Error occurred while fetching data.');\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [timeIn]);\r\n\r\n  const fetchProfile = async () => {\r\n    try {\r\n        const data = await window.ZOHO.CREATOR.init();\r\n        let userid = window.ZOHO.CREATOR.UTIL.getQueryParams().user;\r\n        var config = {\r\n            appName: \"infinite-control-room\",\r\n            reportName: \"My_Profile_Data\",\r\n            criteria: \"Username == \\\"\" + userid + \"\\\"\",\r\n            page: \"1\",\r\n            pageSize: \"100\"\r\n        };\r\n        const response = await window.ZOHO.CREATOR.API.getAllRecords(config);\r\n        const idx = response.data[0].PlantPattern;\r\n        console.log(idx);\r\n        return idx;\r\n    } catch (error) {\r\n        console.error(error);\r\n        // Handle error cases\r\n        return null; // Or any appropriate value indicating error\r\n    }\r\n};\r\n\r\n  useEffect(() => {\r\n    let timeout;\r\n\r\n    if (autoPagination && plantsData.length > 0&&PlantSelection==false) {\r\n      const currentPlant = plantsData[currentPlantIndex];\r\n      setKpimachines(plantsData[currentPlantIndex].length);\r\n\r\n      let kpimonitorsnew = 0;\r\n      let kpidisconnectednew = 0;\r\n      plantsData[currentPlantIndex].forEach((mon) => {\r\n        mon.monitors.forEach((ele)=>{\r\n          if(ele.status==5){\r\n           // console.log(ele.status,currentPlantIndex);\r\n            kpidisconnectednew++;\r\n            \r\n          }\r\n        }) \r\n        kpimonitorsnew += mon.monitors.length;\r\n      });\r\n     // console.log(currentPlantIndex);\r\n      setKpiDisconnected(kpidisconnectednew);\r\n      setKpimonitors(kpimonitorsnew);\r\n\r\n      const totalPages = Math.ceil(currentPlant?.length / itemsPerPage);\r\n     // console.log(\"Current Plant Index:\", currentPlantIndex);\r\n      //console.log(\"Current Page:\", currentPage);\r\n      //console.log(\"Total Pages:\", totalPages);\r\n  \r\n      if (currentPage > totalPages ) {\r\n        if (currentPlantIndex === plantsData.length - 1) {\r\n          timeout = setTimeout(() => {\r\n            setCurrentPage(1);\r\n            setCurrentPlantIndex(0);\r\n          }, 0);\r\n        } else {\r\n          timeout = setTimeout(() => {\r\n            setCurrentPage(1);\r\n            setCurrentPlantIndex((prevIndex) => prevIndex + 1);\r\n          }, 0);\r\n        }\r\n      } else {\r\n        timeout = setTimeout(() => {\r\n          setCurrentPage((prevPage) => prevPage + 1);\r\n        }, timeIn);\r\n      }\r\n    }\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [currentPage, currentPlantIndex, plantsData, autoPagination]);\r\n\r\n  const handleNextPlant = () => {\r\n    const nextPage = currentPage + 1;\r\n  \r\n    \r\n      \r\n      // If we're at the end of the current plant, switch to the next plant\r\n      const nextPlantIndex = (currentPlantIndex + 1) % plantsData.length;\r\n      if(nextPlantIndex>plantsData.length-1){\r\n      setCurrentPlantIndex(nextPlantIndex);\r\n      setCurrentPage(1);\r\n      }else{\r\n        setCurrentPlantIndex(nextPlantIndex);\r\n        setCurrentPage(1);\r\n      } // Reset currentPage for the new plant\r\n      const currentPlant = plantsData[currentPlantIndex];\r\n      setKpimachines(plantsData[currentPlantIndex].length);\r\n\r\n      let kpimonitorsnew = 0;\r\n      let kpidisconnectednew=0;\r\n      plantsData[currentPlantIndex].forEach((mon) => {\r\n        mon.monitors.forEach((ele)=>{\r\n          if(ele.status==5){\r\n           // console.log(ele.status,currentPlantIndex);\r\n            kpidisconnectednew++;\r\n            \r\n          }\r\n        }) \r\n        kpimonitorsnew += mon.monitors.length;\r\n      });\r\n     // console.log(currentPlantIndex);\r\n      setKpiDisconnected(kpidisconnectednew);\r\n      setKpimonitors(kpimonitorsnew);\r\n  };\r\n  const handlePageChange = (pageNumber) => {\r\n    const totalPages = Math.ceil(plantsData[currentPlantIndex].length / itemsPerPage);\r\n\r\n    if (pageNumber <= totalPages) {\r\n      setCurrentPage(pageNumber);\r\n\r\n      if (pageNumber === totalPages && currentPlantIndex !== plantsData.length - 1) {\r\n        setTimeout(() => {\r\n          const nextPlantIndex = currentPlantIndex + 1;\r\n          setCurrentPage(1);\r\n          setCurrentPlantIndex(nextPlantIndex);\r\n        }, timeIn);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCheck = () => {\r\n    setAutoPagination((prevState) => !prevState);\r\n  }\r\n\r\n  const currentPlant = plantsData[currentPlantIndex];\r\n  const totalPages = Math.ceil(currentPlant?.length / itemsPerPage);\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentItems = currentPlant ? currentPlant.slice(indexOfFirstItem, indexOfLastItem) : [];\r\n\r\n  //  style={{ transform: `scale(${1 + zoomLevel / 100})` }}\r\n  return (\r\n    <div>\r\n\r\n      {(currentPlant && apicall) ? (\r\n\r\n        <section className=\"dashboard-sec\">\r\n          <div className=\"container-fluid\">\r\n            <div className=\"header\">\r\n              <TotalPlants plantsData={plantsData} />\r\n              <PatternStorage plantsData={plantsData} cp={currentPlant}/>\r\n            </div>\r\n\r\n            <div className=\"main-content\">\r\n              <div className=\"row\">\r\n                <div className=\"col-lg-9\">\r\n                  <div className=\"left-main\">\r\n                    <div className=\"title-section d-flex mb-2 align-items-center justify-content-between py-2 px-3 bg-white br-10\">\r\n                      <p className=\"mb-0 fs-4 fw-600\"> {currentPlant[0]?.plantName || \"\"}</p>\r\n                      <p className=\"mb-0 text-gray\" onClick={(e)=>{handleNextPlant(currentPlantIndex)}}> Coming Next: <strong className=\"text-primary\" style={{ cursor: \"pointer\" }} >{plantsData[currentPlantIndex + 1] !== undefined ? plantsData[currentPlantIndex + 1][0].plantName : plantsData[0][0].plantName}</strong></p>\r\n                </div>\r\n\r\n                    <Header kpidisconnected={kpidisconnected} kpimachines={kpimachines} kpimonitors={kpimonitors} currentPlant={currentPlant} />\r\n                   \r\n                    <Plant currentItems={currentItems} NextPlant={plantsData[currentPlantIndex + 1] !== undefined ? plantsData[currentPlantIndex + 1][0].plantName : plantsData[0][0].plantName} />\r\n                    \r\n                    <div className=\"pagination-sec\" style={{paddingBottom:\"20px\"}}>\r\n                      <div className=\"row\">\r\n                        <div class=\"pagination-section\">\r\n                          <div class=\"pagination-inner-sec\">\r\n                            <ul className=\"pagination-block\">\r\n                              <Pagination\r\n                                items={currentItems}\r\n                                currentPage={currentPage}\r\n                                totalPages={totalPages}\r\n                                onPageChange={handlePageChange}\r\n                              />\r\n                            </ul>\r\n                            <div className=\"stop-auto-pagination\" >\r\n                              <form>\r\n                                <input onClick={handleCheck} type=\"checkbox\" />\r\n                                Stop Auto Pagination\r\n                              </form>\r\n\r\n                            </div>\r\n\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"health-score-sec\">\r\n                      <div className=\"row\">\r\n                        <div className=\"col-lg-3 mb-3 col-md-6 col-sm-6\">\r\n                          <div className=\"health-score-box py-2 md:px-3 px-1\">\r\n                            <div className=\"score-box green\"></div>\r\n                            <p className=\"text-dark fs-14 mb-0 fw-bold\">Health Score &gt; 80%</p>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-3 mb-3 col-md-6 col-sm-6\">\r\n                          <div className=\"health-score-box py-2 md:px-3 px-1\">\r\n                            <div className=\"score-box yellow\"></div>\r\n                            <p className=\"text-dark fs-14 mb-0 fw-bold\">Health Score &gt; 50% &lt; 80%\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-3 mb-3 col-md-6 col-sm-6\">\r\n                          <div className=\"health-score-box py-2 md:px-3 px-1\">\r\n                            <div className=\"score-box red\"></div>\r\n                            <p className=\"text-dark fs-14 mb-0 fw-bold\">Health Score &lt; 50%\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"col-lg-3 mb-3 col-md-6 col-sm-6\">\r\n                          <div className=\"health-score-box py-2 md:px-3 px-1\">\r\n                            <div className=\"score-box\" style={{backgroundColor:\"white\",border:\"solid 1px\"}}></div>\r\n                            <p className=\"text-dark fs-14 mb-0 fw-bold \" >Health Score Not Available\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                  </div>\r\n                </div>\r\n                <div className=\"col-lg-3\">\r\n                  <div className=\"right-main\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-lg-12 col-md-4 col-sm-6 mb-3\" >\r\n                        <AA currentPlant={currentPlant} />\r\n                      </div>\r\n                      <div className=\"col-lg-12 col-md-4 col-sm-6 mb-3\">\r\n                        <MFI currentPlant={currentPlant} />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n\r\n            <AlertBar  currentPlant={currentPlant}  plantsData={plantsData}/>\r\n          </div>\r\n        </section>\r\n      ) : ((apicall === true) ?\r\n\r\n        (<div style={{ textAlign: \"center\" }}><h1>{`loading....${noData}`}</h1></div>)\r\n        : (<div className=\"login-again\">\r\n          <p>{`Invalid Token, Please Login here`}</p>\r\n          <a href=\"https://crv.infinite-uptime.com/#Profile\" target=\"_blank\">Please click here</a>\r\n        </div>)\r\n\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Container;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}