{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\demo\\\\Desktop\\\\CRV\\\\Zoho_widget_React\\\\react_app\\\\src\\\\Components\\\\Containers\\\\Plant\\\\Machine.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Pie } from \"react-chartjs-2\";\nimport { Velocity } from \"../../../Services/Velocity\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Machine(prop) {\n  _s();\n  const [showPopup, setShowPopup] = useState(false);\n  const [apiData, setApiData] = useState([]);\n  const [board, setBoard] = useState(true); //insta=true\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await Velocity();\n        setApiData(response); // Update state with API data\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchData();\n\n    // Fetch API data every 30 seconds\n    const interval = setInterval(fetchData, 30000);\n    return () => clearInterval(interval);\n  }, []);\n  useEffect(() => {\n    console.log(\"chandu\");\n    setBoard(!board);\n  }, [prop.board]);\n  const getChartData = machine => {\n    // const monitors = machine.monitors.length;\n    //console.log(machine.monitors);\n\n    const healthScores = machine.monitors.map(monitor => monitor.status).filter(healthScore => healthScore !== undefined);\n    const healthScorePercentages = [healthScores.filter(score => score == 5).length, healthScores.filter(score => score == 4).length, healthScores.filter(score => score == 3).length, healthScores.filter(score => score == 2 || score == 1).length];\n    return {\n      // labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\n      datasets: [{\n        data: healthScorePercentages,\n        backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E']\n      }],\n      options: {\n        legend: {\n          display: false\n        }\n      }\n    };\n  };\n  const getChartData2 = machine => {\n    // const monitors = machine.monitors.length;\n\n    //console.log(machine.monitors);\n    const healthScores = machine.monitors.map(monitor => monitor.healthScore).filter(healthScore => healthScore !== undefined);\n    const healthScorePercentages = [healthScores.filter(score => score <= 100 && score > 80).length, healthScores.filter(score => score <= 80 && score > 50).length, healthScores.filter(score => score <= 50 && score > 0).length, healthScores.filter(score => score == 0).length];\n    return {\n      // labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\n      datasets: [{\n        data: healthScorePercentages,\n        backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E']\n      }],\n      options: {\n        legend: {\n          display: false\n        }\n      }\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cement-mill-sec\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cement-mill-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [prop.machine.map((machine, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg col-20 mb-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: \"bold\"\n            },\n            children: machine.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this), board ? /*#__PURE__*/_jsxDEV(Pie, {\n            data: getChartData(machine),\n            width: 200,\n            height: 200,\n            options: {\n              maintainAspectRatio: false,\n              responsive: false\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 22\n          }, this) : /*#__PURE__*/_jsxDEV(Pie, {\n            data: getChartData2(machine),\n            width: 200,\n            height: 200,\n            options: {\n              maintainAspectRatio: false,\n              responsive: false\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Health Score: \" + machine.healthScore, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 58\n            }, this), \"Status: \" + machine.status, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 90\n            }, this), \"MG: \" + machine.mg]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)), showPopup && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"popup\",\n          id: \"exampleModal\",\n          tabIndex: \"-1\",\n          \"aria-labelledby\": \"exampleModalLabel\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n_s(Machine, \"ulM1P/ZEVCZwbNFBrgfsBnEprBg=\");\n_c = Machine;\nexport default Machine;\nvar _c;\n$RefreshReg$(_c, \"Machine\");","map":{"version":3,"names":["React","useState","useEffect","Pie","Velocity","jsxDEV","_jsxDEV","Machine","prop","_s","showPopup","setShowPopup","apiData","setApiData","board","setBoard","fetchData","response","error","console","log","interval","setInterval","clearInterval","getChartData","machine","healthScores","monitors","map","monitor","status","filter","healthScore","undefined","healthScorePercentages","score","length","datasets","data","backgroundColor","options","legend","display","getChartData2","className","children","index","style","fontWeight","name","fileName","_jsxFileName","lineNumber","columnNumber","width","height","maintainAspectRatio","responsive","mg","id","tabIndex","_c","$RefreshReg$"],"sources":["C:/Users/demo/Desktop/CRV/Zoho_widget_React/react_app/src/Components/Containers/Plant/Machine.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Pie } from \"react-chartjs-2\";\r\nimport { Velocity } from \"../../../Services/Velocity\";\r\n\r\nfunction Machine(prop) {\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [apiData, setApiData] = useState([]);\r\n  const [board,setBoard]=useState(true);//insta=true\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await Velocity();\r\n        setApiData(response); // Update state with API data\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    // Fetch API data every 30 seconds\r\n    const interval = setInterval(fetchData, 30000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"chandu\");\r\n   \r\n    setBoard(!board);\r\n  }, [prop.board]);\r\n  const getChartData = (machine) => {\r\n    // const monitors = machine.monitors.length;\r\n    //console.log(machine.monitors);\r\n    \r\n    const healthScores = machine.monitors\r\n    .map((monitor) => monitor.status)\r\n    .filter((healthScore) => healthScore !== undefined);\r\n\r\n    const healthScorePercentages = [\r\n      healthScores.filter((score) => score == 5 ).length,\r\n      healthScores.filter((score) => score == 4).length,\r\n      healthScores.filter((score) => score == 3).length,\r\n      healthScores.filter((score) => score == 2 ||score == 1).length,\r\n    ];\r\n   \r\n\r\n    return {\r\n      // labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\r\n      datasets: [\r\n        {\r\n          data: healthScorePercentages,\r\n          backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E'],\r\n        },\r\n      ],\r\n      options: {\r\n        legend: {\r\n          display: false,\r\n        },\r\n      },\r\n    };\r\n  };\r\n  const getChartData2 = (machine) => {\r\n    // const monitors = machine.monitors.length;\r\n\r\n    //console.log(machine.monitors);\r\n      const healthScores = machine.monitors\r\n      .map((monitor) => monitor.healthScore)\r\n      .filter((healthScore) => healthScore !== undefined);\r\n\r\n    const healthScorePercentages = [\r\n      healthScores.filter((score) => score <= 100 &&score > 80).length,\r\n      healthScores.filter((score) => score <=80  &&score > 50).length,\r\n      healthScores.filter((score) => score <=50  &&score > 0).length,\r\n      healthScores.filter((score) => score == 0).length,\r\n    ];\r\n\r\n    return {\r\n      // labels: ['Healthy', 'Warning', 'Critical', 'Undefined'],\r\n      datasets: [\r\n        {\r\n          data: healthScorePercentages,\r\n          backgroundColor: ['#64DD17', '#FFC107', '#FF5722', '#9E9E9E'],\r\n        },\r\n      ],\r\n      options: {\r\n        legend: {\r\n          display: false,\r\n        },\r\n      },\r\n    };\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"cement-mill-sec\" >\r\n      <div className=\"cement-mill-wrapper\">\r\n        <div className=\"row\">\r\n          {prop.machine.map((machine, index) => (\r\n            \r\n            <div key={index} className=\"col-lg col-20 mb-1\">\r\n              <div style={{fontWeight:\"bold\"}}>{machine.name}</div>\r\n              \r\n             {board? <Pie data={getChartData(machine)} width={200}   height={200} options={{\r\n                maintainAspectRatio: false,\r\n                responsive: false,\r\n                \r\n                \r\n              }} />:<Pie data={getChartData2(machine)} width={200}   height={200} options={{\r\n                maintainAspectRatio: false,\r\n                responsive: false,\r\n                \r\n                \r\n              }} />}\r\n              <div>{\"Health Score: \"+machine.healthScore}<br/>{\"Status: \"+machine.status}<br/>{\"MG: \"+machine.mg}</div>\r\n              {/* {console.log(machine)} */}\r\n            </div>\r\n          ))}\r\n          {showPopup && (\r\n            <div\r\n              className=\"popup\"\r\n              id=\"exampleModal\"\r\n              tabIndex=\"-1\"\r\n              aria-labelledby=\"exampleModalLabel\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              {/* ... Popup content ... */}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Machine;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}