{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/demo/Desktop/CRV/Zoho_widget_React/react_app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/demo/Desktop/CRV/Zoho_widget_React/react_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";export function Velocity(){return _Velocity.apply(this,arguments);}function _Velocity(){_Velocity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var accessToken,arrayOfMachines,loginResponse,queryParams,loginData,orgidAll,plantsData,plantsResponse;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:accessToken=\"\";arrayOfMachines=[];_context2.prev=2;_context2.next=5;return window.ZOHO.CREATOR.init().then(function(data){var accessTokenz=\"\";var userid=window.ZOHO.CREATOR.UTIL.getQueryParams().user;//console.log(\"userid\"+userid)\nvar config={appName:\"infinite-control-room\",reportName:\"My_Profile_Data\",criteria:\"Username ==\\\"\"+userid+\"\\\"\",page:\"1\",pageSize:\"100\"};var access=window.ZOHO.CREATOR.API.getAllRecords(config).then(function(response){var userData=response;accessTokenz=userData.data[0].Access_Token;return accessTokenz;});return access;});case 5:loginResponse=_context2.sent;_context2.next=8;return window.ZOHO.CREATOR.init().then(function(data){return window.ZOHO.CREATOR.UTIL.getQueryParams();});case 8:queryParams=_context2.sent;_context2.next=11;return loginResponse;case 11:loginData=_context2.sent;// console.log(\"loginData\"+ loginData);\naccessToken=loginData;//accessToken=\"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyY0NxRnpxRXJrNU5GS1RjTi1YSk1IdE9NS2tWVTZXS1hIdHZFMF8xZE5ZIn0.eyJleHAiOjE2ODY5NTQ5OTEsImlhdCI6MTY4NjkxMTc5MSwianRpIjoiNDU0MGQ1MTctNjE1ZS00NDZmLTgxOTgtNTc1YzY1ZjUwZmM3IiwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS5pbmZpbml0ZS11cHRpbWUuY29tL3JlYWxtcy9pZGFwIiwic3ViIjoiZjo2MGNhNzY4Yy1iMTA0LTQ0OTktYjU4Yy05MzliOTdlNzAzM2Q6ODcxMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImlkYXAiLCJzZXNzaW9uX3N0YXRlIjoiNGQ0YjUzMDAtM2NlZC00ZTk5LTlmNDEtYmRjMDI0ZjJkMzhlIiwic2NvcGUiOiJlbWFpbCIsInNpZCI6IjRkNGI1MzAwLTNjZWQtNGU5OS05ZjQxLWJkYzAyNGYyZDM4ZSIsImlzX2FkbWluIjoiZmFsc2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlkYXBfcm9sZSI6IlJPTEVfVVNFUiIsImVtYWlsIjoiUmFwYWthLmNoYW5kcmFzaGVrYXJAZ21haWwuY29tIn0.l8NL7t1Kqf77hOHo_kGSpcKzDoSjFFYmKdyn3y6-fC45B_ICvvYz_FLMfazPMOxVzMG0nb0nD88y_J45wFYTjLnfwbZbIzw--vbVKt1EMe4qK6ko4wv1jTRrjg97m7PaQL3FLcv1JSPafJ8ukPm1z4BPo0tpoHlbZX1vCGwm1ZgdJqTBM6bJrtrLyB1EcABWsXIbd7r_756vua7sOO_7ZkAppAiHTV3qqjM5N0cjHaKTkMXYAiVkl6kBpsZf7N8CCdwkZTKV3rapK_zQGJhS2VxSNkeiERF2Y16nyPxSjxyzQFBB6I0AB2xqSSWlhJ6Shk2yaaI1MB9_cdt8oOgJPg\";\n// console.log(\"queryParamsvelocity\" + JSON.stringify(queryParams));\n//console.log(\"accessToken\"+accessToken);\n//console.log(\"check\"+ accessToken);\n// let orgid=queryParams.PlantId.split(\",\")[1];\norgidAll=queryParams.PlantId.split(\",\");_context2.next=16;return Promise.all(orgidAll.map(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(orgid){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.infinite-uptime.com/api/2.0/md/monitoring/bymonitors?plantId=\".concat(orgid),{method:'GET',headers:{'accept':'application/json','Authorization':'Bearer '+accessToken}});case 2:plantsResponse=_context.sent;_context.next=5;return plantsResponse.json();case 5:plantsData=_context.sent;plantsData.machineGroups.map(function(mg){mg.machines.map(function(machine){arrayOfMachines.push(machine);});});case 7:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()));case 16:plantsResponse=_context2.sent;return _context2.abrupt(\"return\",arrayOfMachines);case 20:_context2.prev=20;_context2.t0=_context2[\"catch\"](2);console.error(_context2.t0);throw _context2.t0;case 24:case\"end\":return _context2.stop();}},_callee2,null,[[2,20]]);}));return _Velocity.apply(this,arguments);}","map":{"version":3,"names":["Velocity","_Velocity","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","accessToken","arrayOfMachines","loginResponse","queryParams","loginData","orgidAll","plantsData","plantsResponse","wrap","_callee2$","_context2","prev","next","window","ZOHO","CREATOR","init","then","data","accessTokenz","userid","UTIL","getQueryParams","user","config","appName","reportName","criteria","page","pageSize","access","API","getAllRecords","response","userData","Access_Token","sent","PlantId","split","Promise","all","map","_ref","_callee","orgid","_callee$","_context","fetch","concat","method","headers","json","machineGroups","mg","machines","machine","push","stop","_x","abrupt","t0","console","error"],"sources":["C:/Users/demo/Desktop/CRV/Zoho_widget_React/react_app/src/Services/Velocity.js"],"sourcesContent":["\r\nexport async function Velocity() {\r\n    let accessToken = \"\";\r\n\r\n    const arrayOfMachines = [];\r\n\r\n\r\n\r\n    try {\r\n\r\n        const loginResponse = await window.ZOHO.CREATOR.init().then(function (data) {\r\n            let accessTokenz = \"\";\r\n            let userid=window.ZOHO.CREATOR.UTIL.getQueryParams().user;\r\n            //console.log(\"userid\"+userid)\r\n          \r\n           var config = {\r\n            appName: \"infinite-control-room\",\r\n            reportName: \"My_Profile_Data\",\r\n            criteria: \"Username ==\\\"\"+userid+\"\\\"\",\r\n            page: \"1\",\r\n            pageSize: \"100\"\r\n          }\r\n            const access = window.ZOHO.CREATOR.API.getAllRecords(config).then(function (response) {\r\n                let userData = response;\r\n\r\n                accessTokenz = userData.data[0].Access_Token;\r\n                return accessTokenz;\r\n            });\r\n            return access;\r\n        });\r\n        const queryParams = await window.ZOHO.CREATOR.init().then(function (data) {\r\n            return window.ZOHO.CREATOR.UTIL.getQueryParams();\r\n        });\r\n\r\n        const loginData = await loginResponse;\r\n        // console.log(\"loginData\"+ loginData);\r\n        accessToken = loginData;\r\n        //accessToken=\"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIyY0NxRnpxRXJrNU5GS1RjTi1YSk1IdE9NS2tWVTZXS1hIdHZFMF8xZE5ZIn0.eyJleHAiOjE2ODY5NTQ5OTEsImlhdCI6MTY4NjkxMTc5MSwianRpIjoiNDU0MGQ1MTctNjE1ZS00NDZmLTgxOTgtNTc1YzY1ZjUwZmM3IiwiaXNzIjoiaHR0cHM6Ly9pZGVudGl0eS5pbmZpbml0ZS11cHRpbWUuY29tL3JlYWxtcy9pZGFwIiwic3ViIjoiZjo2MGNhNzY4Yy1iMTA0LTQ0OTktYjU4Yy05MzliOTdlNzAzM2Q6ODcxMSIsInR5cCI6IkJlYXJlciIsImF6cCI6ImlkYXAiLCJzZXNzaW9uX3N0YXRlIjoiNGQ0YjUzMDAtM2NlZC00ZTk5LTlmNDEtYmRjMDI0ZjJkMzhlIiwic2NvcGUiOiJlbWFpbCIsInNpZCI6IjRkNGI1MzAwLTNjZWQtNGU5OS05ZjQxLWJkYzAyNGYyZDM4ZSIsImlzX2FkbWluIjoiZmFsc2UiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImlkYXBfcm9sZSI6IlJPTEVfVVNFUiIsImVtYWlsIjoiUmFwYWthLmNoYW5kcmFzaGVrYXJAZ21haWwuY29tIn0.l8NL7t1Kqf77hOHo_kGSpcKzDoSjFFYmKdyn3y6-fC45B_ICvvYz_FLMfazPMOxVzMG0nb0nD88y_J45wFYTjLnfwbZbIzw--vbVKt1EMe4qK6ko4wv1jTRrjg97m7PaQL3FLcv1JSPafJ8ukPm1z4BPo0tpoHlbZX1vCGwm1ZgdJqTBM6bJrtrLyB1EcABWsXIbd7r_756vua7sOO_7ZkAppAiHTV3qqjM5N0cjHaKTkMXYAiVkl6kBpsZf7N8CCdwkZTKV3rapK_zQGJhS2VxSNkeiERF2Y16nyPxSjxyzQFBB6I0AB2xqSSWlhJ6Shk2yaaI1MB9_cdt8oOgJPg\";\r\n       // console.log(\"queryParamsvelocity\" + JSON.stringify(queryParams));\r\n\r\n        //console.log(\"accessToken\"+accessToken);\r\n        //console.log(\"check\"+ accessToken);\r\n\r\n        // let orgid=queryParams.PlantId.split(\",\")[1];\r\n        const orgidAll = queryParams.PlantId.split(\",\");\r\n        let plantsData;\r\n        let plantsResponse\r\n        plantsResponse = await Promise.all(orgidAll.map(async (orgid) => {\r\n            plantsResponse = await fetch(`https://api.infinite-uptime.com/api/2.0/md/monitoring/bymonitors?plantId=${orgid}`, {\r\n                method: 'GET',\r\n                headers: {\r\n                    'accept': 'application/json',\r\n                    'Authorization': 'Bearer ' + accessToken,\r\n                },\r\n            });\r\n            plantsData = await plantsResponse.json();\r\n            \r\n            plantsData.machineGroups.map((mg) => {\r\n                \r\n                mg.machines.map((machine) => {\r\n                    arrayOfMachines.push(machine);\r\n                })\r\n\r\n            })\r\n\r\n        }));\r\n\r\n        // console.log(\"velocityarrayofMachines\", arrayOfMachines);\r\n\r\n        return arrayOfMachines;\r\n\r\n\r\n    } catch (error) {\r\n        console.error(error);\r\n        throw error;\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}